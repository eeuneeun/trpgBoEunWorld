/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/page-flip";
exports.ids = ["vendor-chunks/page-flip"];
exports.modules = {

/***/ "(ssr)/./node_modules/page-flip/dist/js/page-flip.browser.js":
/*!*************************************************************!*\
  !*** ./node_modules/page-flip/dist/js/page-flip.browser.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("!function(t,e){ true?e(exports):0}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,h,r,s,n):this.drawLoader(i,{x:h,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,o=i.y;let a=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-o,2)))+s;i.x<0&&(a*=-1);let g=(a-s)*(n-o)/(s-r)+n;return s-r+n===0&&(g=e),{x:a,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,a=i*o-s*r,g=n*o-h*r,l=-(r*h-o*n)/(i*h-s*n),d=-(i*o-s*r)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(a-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let o=1;o<=n;o+=1)h.push({x:r(t.x,e.x,i,n,o),y:r(t.y,e.y,s,n,o)});return h}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class o extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class a{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,a=this.rect.topLeft;if(\"bottom\"===this.corner&&(o=this.rect.topRight,a=this.rect.bottomLeft),o.x<=0){const t=h.LimitPointToCircle(i,r,a);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new a(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push(()=>this.do(t));const o=this.getAnimationDuration(n.length);this.render.startAnimation(r,o,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,r=this.setting.height,o=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),r=h/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),h=r*n),o=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",o=i-h/2-h),this.boundsRect={left:o,top:s-r/2,width:2*h,height:r,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){window.addEventListener(\"resize\",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}reload(){this.element.querySelector(\".stf__outerShadow\")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let a=\"polygon( \";for(const t of o){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},r),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o=\"polygon( \";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),o+=e.x+\"px \"+e.y+\"px, \"}o=o.slice(0,-2),o+=\")\";const a=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;this.outerShadow.style.cssText=a}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcGFnZS1mbGlwL2Rpc3QvanMvcGFnZS1mbGlwLmJyb3dzZXIuanMiLCJtYXBwaW5ncyI6IkFBQUEsZUFBZSxLQUFvRCxZQUFZLENBQWdGLENBQUMsbUJBQW1CLGFBQWEsUUFBUSxpQkFBaUIsWUFBWSwwQkFBMEIsUUFBUSxnQ0FBZ0MsZ0ZBQWdGLGNBQWMsK0NBQStDLHFCQUFxQix5QkFBeUIsZUFBZSxzQkFBc0IsWUFBWSxtQkFBbUIsV0FBVyxrQkFBa0IsdUJBQXVCLDhCQUE4QixnQkFBZ0IscURBQXFELGtCQUFrQixtQkFBbUIsb0JBQW9CLDhCQUE4QixhQUFhLDJCQUEyQixlQUFlLDZCQUE2QixrQkFBa0IsbUJBQW1CLG9HQUFvRyxRQUFRLHFKQUFxSiw0Q0FBNEMsb0dBQW9HLG1HQUFtRyxRQUFRLGtCQUFrQixjQUFjLDRIQUE0SCwrREFBK0QsUUFBUSxNQUFNLG9CQUFvQixnSkFBZ0osU0FBUyxxQkFBcUIsbU1BQW1NLE9BQU8scUNBQXFDLGVBQWUsRUFBRSxtQkFBbUIsWUFBWSxtQkFBbUIsWUFBWSxzQkFBc0IsUUFBUSxpQkFBaUIsa05BQWtOLFVBQVUsY0FBYyxlQUFlLCtDQUErQyxZQUFZLG9CQUFvQixrQ0FBa0MsUUFBUSx3RkFBd0YsWUFBWSxvQkFBb0IsZ0lBQWdJLFlBQVksMEZBQTBGLHdCQUF3Qix5QkFBeUIsWUFBWSxXQUFXLHlDQUF5QyxZQUFZLGVBQWUseUJBQXlCLFdBQVcsa0JBQWtCLFdBQVcsa0RBQWtELHVDQUF1QyxVQUFVLDhCQUE4QixrREFBa0QsVUFBVSw4QkFBOEIsZ0NBQWdDLG1CQUFtQixnQ0FBZ0MsNEdBQTRHLDBEQUEwRCw4REFBOEQsaUJBQWlCLGdDQUFnQywyRkFBMkYsMERBQTBELDhFQUE4RSxXQUFXLCtGQUErRixXQUFXLHlFQUF5RSxzQkFBc0IsNkJBQTZCLGFBQWEsd0VBQXdFLHFDQUFxQyx3REFBd0Qsd0JBQXdCLCtCQUErQix5QkFBeUIsc0VBQXNFLDBCQUEwQixhQUFhLGtE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QUFzQixvQkFBb0IsMkRBQTJELGdCQUFnQixJQUFJLGlCQUFpQixrSUFBa0ksVUFBVSxzQ0FBc0MsU0FBUyx1Q0FBdUMsa0JBQWtCLDRDQUE0Qyw0QkFBNEIsc05BQXNOLDJDQUEyQyw4REFBOEQsRUFBRSxJQUFJLGdCQUFnQixvVEFBb1QsMkNBQTJDLDhEQUE4RCxFQUFFLElBQUksb0JBQW9CLHlDQUF5QywySEFBMkgseUNBQXlDLEVBQUUsa0JBQWtCLHlDQUF5QyxnTUFBZ00seUNBQXlDLEVBQUUsUUFBUSxxQ0FBcUMsaUJBQWlCLHNCQUFzQixpQkFBaUIsc0JBQXNCLGNBQWMsbUJBQW1CLGtCQUFrQixnQ0FBZ0Msa0JBQWtCLGdDQUFnQyxnQkFBZ0Isb0NBQW9DLGVBQWUsbUNBQW1DLG1CQUFtQiw0QkFBNEIscUJBQXFCLHNGQUFzRixlQUFlLGlDQUFpQyxzQkFBc0Isd0NBQXdDLFdBQVcsNkJBQTZCLFlBQVksbUJBQW1CLG9CQUFvQiwyQkFBMkIsaUJBQWlCLG9DQUFvQyxnQkFBZ0IsNkJBQTZCLGNBQWMsb0JBQW9CLFFBQVEsZUFBZSxXQUFXLHNDQUFzQyxvQkFBb0Isa0JBQWtCLGtCQUFrQiw0REFBNEQsY0FBYyw4TUFBOE0saUJBQWlCLHlIQUF5SCx1Q0FBdUMsU0FBUyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1hdXRoLXRlc3QvLi9ub2RlX21vZHVsZXMvcGFnZS1mbGlwL2Rpc3QvanMvcGFnZS1mbGlwLmJyb3dzZXIuanM/Y2RhYSJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9lKGV4cG9ydHMpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiZXhwb3J0c1wiXSxlKTplKCh0PXR8fHNlbGYpLlN0PXt9KX0odGhpcywoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7Y2xhc3MgZXtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuc3RhdGU9e2FuZ2xlOjAsYXJlYTpbXSxwb3NpdGlvbjp7eDowLHk6MH0saGFyZEFuZ2xlOjAsaGFyZERyYXdpbmdBbmdsZTowfSx0aGlzLmNyZWF0ZWREZW5zaXR5PWUsdGhpcy5ub3dEcmF3aW5nRGVuc2l0eT10aGlzLmNyZWF0ZWREZW5zaXR5LHRoaXMucmVuZGVyPXR9c2V0RGVuc2l0eSh0KXt0aGlzLmNyZWF0ZWREZW5zaXR5PXQsdGhpcy5ub3dEcmF3aW5nRGVuc2l0eT10fXNldERyYXdpbmdEZW5zaXR5KHQpe3RoaXMubm93RHJhd2luZ0RlbnNpdHk9dH1zZXRQb3NpdGlvbih0KXt0aGlzLnN0YXRlLnBvc2l0aW9uPXR9c2V0QW5nbGUodCl7dGhpcy5zdGF0ZS5hbmdsZT10fXNldEFyZWEodCl7dGhpcy5zdGF0ZS5hcmVhPXR9c2V0SGFyZERyYXdpbmdBbmdsZSh0KXt0aGlzLnN0YXRlLmhhcmREcmF3aW5nQW5nbGU9dH1zZXRIYXJkQW5nbGUodCl7dGhpcy5zdGF0ZS5oYXJkQW5nbGU9dCx0aGlzLnN0YXRlLmhhcmREcmF3aW5nQW5nbGU9dH1zZXRPcmllbnRhdGlvbih0KXt0aGlzLm9yaWVudGF0aW9uPXR9Z2V0RHJhd2luZ0RlbnNpdHkoKXtyZXR1cm4gdGhpcy5ub3dEcmF3aW5nRGVuc2l0eX1nZXREZW5zaXR5KCl7cmV0dXJuIHRoaXMuY3JlYXRlZERlbnNpdHl9Z2V0SGFyZEFuZ2xlKCl7cmV0dXJuIHRoaXMuc3RhdGUuaGFyZEFuZ2xlfX1jbGFzcyBpIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxpKSx0aGlzLmltYWdlPW51bGwsdGhpcy5pc0xvYWQ9ITEsdGhpcy5sb2FkaW5nQW5nbGU9MCx0aGlzLmltYWdlPW5ldyBJbWFnZSx0aGlzLmltYWdlLnNyYz1lfWRyYXcodCl7Y29uc3QgZT10aGlzLnJlbmRlci5nZXRDb250ZXh0KCksaT10aGlzLnJlbmRlci5jb252ZXJ0VG9HbG9iYWwodGhpcy5zdGF0ZS5wb3NpdGlvbikscz10aGlzLnJlbmRlci5nZXRSZWN0KCkucGFnZVdpZHRoLG49dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmhlaWdodDtlLnNhdmUoKSxlLnRyYW5zbGF0ZShpLngsaS55KSxlLmJlZ2luUGF0aCgpO2ZvcihsZXQgdCBvZiB0aGlzLnN0YXRlLmFyZWEpbnVsbCE9PXQmJih0PXRoaXMucmVuZGVyLmNvbnZlcnRUb0dsb2JhbCh0KSxlLmxpbmVUbyh0LngtaS54LHQueS1pLnkpKTtlLnJvdGF0ZSh0aGlzLnN0YXRlLmFuZ2xlKSxlLmNsaXAoKSx0aGlzLmlzTG9hZD9lLmRyYXdJbWFnZSh0aGlzLmltYWdlLDAsMCxzLG4pOnRoaXMuZHJhd0xvYWRlcihlLHt4OjAseTowfSxzLG4pLGUucmVzdG9yZSgpfXNpbXBsZURyYXcodCl7Y29uc3QgZT10aGlzLnJlbmRlci5nZXRSZWN0KCksaT10aGlzLnJlbmRlci5nZXRDb250ZXh0KCkscz1lLnBhZ2VXaWR0aCxuPWUuaGVpZ2h0LGg9MT09PXQ/ZS5sZWZ0K2UucGFnZVdpZHRoOmUubGVmdCxyPWUudG9wO3RoaXMuaXNMb2FkP2kuZHJhd0ltYWdlKHRoaXMuaW1hZ2UsaCxyLHMsbik6dGhpcy5kcmF3TG9hZGVyKGkse3g6aCx5OnJ9LHMsbil9ZHJhd0xvYWRlcih0LGUsaSxzKXt0LmJlZ2luUGF0aCgpLHQuc3Ryb2tlU3R5bGU9XCJyZ2IoMjAwLCAyMDAsIDIwMClcIix0LmZpbGxTdHlsZT1cInJnYigyNTUsIDI1NSwgMjU1KVwiLHQubGluZVdpZHRoPTEsdC5yZWN0KGUueCsxLGUueSsxLGktMSxzLTEpLHQuc3Ryb2tlKCksdC5maWxsKCk7Y29uc3Qgbj17eDplLngraS8yLHk6ZS55K3MvMn07dC5iZWdpblBhdGgoKSx0LmxpbmVXaWR0aD0xMCx0LmFyYyhuLngsbi55LDIwLHRoaXMubG9hZGluZ0FuZ2xlLDMqTWF0aC5QSS8yK3RoaXMubG9hZGluZ0FuZ2xlKSx0LnN0cm9rZSgpLHQuY2xvc2VQYXRoKCksdGhpcy5sb2FkaW5nQW5nbGUrPS4wNyx0aGlzLmxvYWRpbmdBbmdsZT49MipNYXRoLlBJJiYodGhpcy5sb2FkaW5nQW5nbGU9MCl9bG9hZCgpe3RoaXMuaXNMb2FkfHwodGhpcy5pbWFnZS5vbmxvYWQ9KCk9Pnt0aGlzLmlzTG9hZD0hMH0pfW5ld1RlbXBvcmFyeUNvcHkoKXtyZXR1cm4gdGhpc31nZXRUZW1wb3JhcnlDb3B5KCl7cmV0dXJuIHRoaXN9aGlkZVRlbXBvcmFyeUNvcHkoKXt9fWNsYXNzIHN7Y29uc3RydWN0b3IodCxlKXt0aGlzLnBhZ2VzPVtdLHRoaXMuY3VycmVudFBhZ2VJbmRleD0wLHRoaXMuY3VycmVudFNwcmVhZEluZGV4PTAsdGhpcy5sYW5kc2NhcGVTcHJlYWQ9W10sdGhpcy5wb3J0cmFpdFNwcmVhZD1bXSx0aGlzLnJlbmRlcj1lLHRoaXMuYXBwPXQsdGhpcy5jdXJyZW50UGFnZUluZGV4PTAsdGhpcy5pc1Nob3dDb3Zlcj10aGlzLmFwcC5nZXRTZXR0aW5ncygpLnNob3dDb3Zlcn1kZXN0cm95KCl7dGhpcy5wYWdlcz1bXX1jcmVhdGVTcHJlYWQoKXt0aGlzLmxhbmRzY2FwZVNwcmVhZD1bXSx0aGlzLnBvcnRyYWl0U3ByZWFkPVtdO2ZvcihsZXQgdD0wO3Q8dGhpcy5wYWdlcy5sZW5ndGg7dCsrKXRoaXMucG9ydHJhaXRTcHJlYWQucHVzaChbdF0pO2xldCB0PTA7dGhpcy5pc1Nob3dDb3ZlciYmKHRoaXMucGFnZXNbMF0uc2V0RGVuc2l0eShcImhhcmRcIiksdGhpcy5sYW5kc2NhcGVTcHJlYWQucHVzaChbdF0pLHQrKyk7Zm9yKGxldCBlPXQ7ZTx0aGlzLnBhZ2VzLmxlbmd0aDtlKz0yKWU8dGhpcy5wYWdlcy5sZW5ndGgtMT90aGlzLmxhbmRzY2FwZVNwcmVhZC5wdXNoKFtlLGUrMV0pOih0aGlzLmxhbmRzY2FwZVNwcmVhZC5wdXNoKFtlXSksdGhpcy5wYWdlc1tlXS5zZXREZW5zaXR5KFwiaGFyZFwiKSl9Z2V0U3ByZWFkKCl7cmV0dXJuXCJsYW5kc2NhcGVcIj09PXRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCk/dGhpcy5sYW5kc2NhcGVTcHJlYWQ6dGhpcy5wb3J0cmFpdFNwcmVhZH1nZXRTcHJlYWRJbmRleEJ5UGFnZSh0KXtjb25zdCBlPXRoaXMuZ2V0U3ByZWFkKCk7Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspaWYodD09PWVbaV1bMF18fHQ9PT1lW2ldWzFdKXJldHVybiBpO3JldHVybiBudWxsfWdldFBhZ2VDb3VudCgpe3JldHVybiB0aGlzLnBhZ2VzLmxlbmd0aH1nZXRQYWdlcygpe3JldHVybiB0aGlzLnBhZ2VzfWdldFBhZ2UodCl7aWYodD49MCYmdDx0aGlzLnBhZ2VzLmxlbmd0aClyZXR1cm4gdGhpcy5wYWdlc1t0XTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhZ2UgbnVtYmVyXCIpfW5leHRCeSh0KXtjb25zdCBlPXRoaXMucGFnZXMuaW5kZXhPZih0KTtyZXR1cm4gZTx0aGlzLnBhZ2VzLmxlbmd0aC0xP3RoaXMucGFnZXNbZSsxXTpudWxsfXByZXZCeSh0KXtjb25zdCBlPXRoaXMucGFnZXMuaW5kZXhPZih0KTtyZXR1cm4gZT4wP3RoaXMucGFnZXNbZS0xXTpudWxsfWdldEZsaXBwaW5nUGFnZSh0KXtjb25zdCBlPXRoaXMuY3VycmVudFNwcmVhZEluZGV4O2lmKFwicG9ydHJhaXRcIj09PXRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCkpcmV0dXJuIDA9PT10P3RoaXMucGFnZXNbZV0ubmV3VGVtcG9yYXJ5Q29weSgpOnRoaXMucGFnZXNbZS0xXTt7Y29uc3QgaT0wPT09dD90aGlzLmdldFNwcmVhZCgpW2UrMV06dGhpcy5nZXRTcHJlYWQoKVtlLTFdO3JldHVybiAxPT09aS5sZW5ndGh8fDA9PT10P3RoaXMucGFnZXNbaVswXV06dGhpcy5wYWdlc1tpWzFdXX19Z2V0Qm90dG9tUGFnZSh0KXtjb25zdCBlPXRoaXMuY3VycmVudFNwcmVhZEluZGV4O2lmKFwicG9ydHJhaXRcIj09PXRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCkpcmV0dXJuIDA9PT10P3RoaXMucGFnZXNbZSsxXTp0aGlzLnBhZ2VzW2UtMV07e2NvbnN0IGk9MD09PXQ/dGhpcy5nZXRTcHJlYWQoKVtlKzFdOnRoaXMuZ2V0U3ByZWFkKClbZS0xXTtyZXR1cm4gMT09PWkubGVuZ3RoP3RoaXMucGFnZXNbaVswXV06MD09PXQ/dGhpcy5wYWdlc1tpWzFdXTp0aGlzLnBhZ2VzW2lbMF1dfX1zaG93TmV4dCgpe3RoaXMuY3VycmVudFNwcmVhZEluZGV4PHRoaXMuZ2V0U3ByZWFkKCkubGVuZ3RoJiYodGhpcy5jdXJyZW50U3ByZWFkSW5kZXgrKyx0aGlzLnNob3dTcHJlYWQoKSl9c2hvd1ByZXYoKXt0aGlzLmN1cnJlbnRTcHJlYWRJbmRleD4wJiYodGhpcy5jdXJyZW50U3ByZWFkSW5kZXgtLSx0aGlzLnNob3dTcHJlYWQoKSl9Z2V0Q3VycmVudFBhZ2VJbmRleCgpe3JldHVybiB0aGlzLmN1cnJlbnRQYWdlSW5kZXh9c2hvdyh0PW51bGwpe2lmKG51bGw9PT10JiYodD10aGlzLmN1cnJlbnRQYWdlSW5kZXgpLHQ8MHx8dD49dGhpcy5wYWdlcy5sZW5ndGgpcmV0dXJuO2NvbnN0IGU9dGhpcy5nZXRTcHJlYWRJbmRleEJ5UGFnZSh0KTtudWxsIT09ZSYmKHRoaXMuY3VycmVudFNwcmVhZEluZGV4PWUsdGhpcy5zaG93U3ByZWFkKCkpfWdldEN1cnJlbnRTcHJlYWRJbmRleCgpe3JldHVybiB0aGlzLmN1cnJlbnRTcHJlYWRJbmRleH1zZXRDdXJyZW50U3ByZWFkSW5kZXgodCl7aWYoISh0Pj0wJiZ0PHRoaXMuZ2V0U3ByZWFkKCkubGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhZ2VcIik7dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg9dH1zaG93U3ByZWFkKCl7Y29uc3QgdD10aGlzLmdldFNwcmVhZCgpW3RoaXMuY3VycmVudFNwcmVhZEluZGV4XTsyPT09dC5sZW5ndGg/KHRoaXMucmVuZGVyLnNldExlZnRQYWdlKHRoaXMucGFnZXNbdFswXV0pLHRoaXMucmVuZGVyLnNldFJpZ2h0UGFnZSh0aGlzLnBhZ2VzW3RbMV1dKSk6XCJsYW5kc2NhcGVcIj09PXRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCkmJnRbMF09PT10aGlzLnBhZ2VzLmxlbmd0aC0xPyh0aGlzLnJlbmRlci5zZXRMZWZ0UGFnZSh0aGlzLnBhZ2VzW3RbMF1dKSx0aGlzLnJlbmRlci5zZXRSaWdodFBhZ2UobnVsbCkpOih0aGlzLnJlbmRlci5zZXRMZWZ0UGFnZShudWxsKSx0aGlzLnJlbmRlci5zZXRSaWdodFBhZ2UodGhpcy5wYWdlc1t0WzBdXSkpLHRoaXMuY3VycmVudFBhZ2VJbmRleD10WzBdLHRoaXMuYXBwLnVwZGF0ZVBhZ2VJbmRleCh0aGlzLmN1cnJlbnRQYWdlSW5kZXgpfX1jbGFzcyBuIGV4dGVuZHMgc3tjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxlKSx0aGlzLmltYWdlc0hyZWY9aX1sb2FkKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5pbWFnZXNIcmVmKXtjb25zdCBlPW5ldyBpKHRoaXMucmVuZGVyLHQsXCJzb2Z0XCIpO2UubG9hZCgpLHRoaXMucGFnZXMucHVzaChlKX10aGlzLmNyZWF0ZVNwcmVhZCgpfX1jbGFzcyBoe3N0YXRpYyBHZXREaXN0YW5jZUJldHdlZW5Ud29Qb2ludCh0LGUpe3JldHVybiBudWxsPT09dHx8bnVsbD09PWU/MS8wOk1hdGguc3FydChNYXRoLnBvdyhlLngtdC54LDIpK01hdGgucG93KGUueS10LnksMikpfXN0YXRpYyBHZXRTZWdtZW50TGVuZ3RoKHQpe3JldHVybiBoLkdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHRbMF0sdFsxXSl9c3RhdGljIEdldEFuZ2xlQmV0d2VlblR3b0xpbmUodCxlKXtjb25zdCBpPXRbMF0ueS10WzFdLnkscz1lWzBdLnktZVsxXS55LG49dFsxXS54LXRbMF0ueCxoPWVbMV0ueC1lWzBdLng7cmV0dXJuIE1hdGguYWNvcygoaSpzK24qaCkvKE1hdGguc3FydChpKmkrbipuKSpNYXRoLnNxcnQocypzK2gqaCkpKX1zdGF0aWMgUG9pbnRJblJlY3QodCxlKXtyZXR1cm4gbnVsbD09PWU/bnVsbDplLng+PXQubGVmdCYmZS54PD10LndpZHRoK3QubGVmdCYmZS55Pj10LnRvcCYmZS55PD10LnRvcCt0LmhlaWdodD9lOm51bGx9c3RhdGljIEdldFJvdGF0ZWRQb2ludCh0LGUsaSl7cmV0dXJue3g6dC54Kk1hdGguY29zKGkpK3QueSpNYXRoLnNpbihpKStlLngseTp0LnkqTWF0aC5jb3MoaSktdC54Kk1hdGguc2luKGkpK2UueX19c3RhdGljIExpbWl0UG9pbnRUb0NpcmNsZSh0LGUsaSl7aWYoaC5HZXREaXN0YW5jZUJldHdlZW5Ud29Qb2ludCh0LGkpPD1lKXJldHVybiBpO2NvbnN0IHM9dC54LG49dC55LHI9aS54LG89aS55O2xldCBhPU1hdGguc3FydChNYXRoLnBvdyhlLDIpKk1hdGgucG93KHMtciwyKS8oTWF0aC5wb3cocy1yLDIpK01hdGgucG93KG4tbywyKSkpK3M7aS54PDAmJihhKj0tMSk7bGV0IGc9KGEtcykqKG4tbykvKHMtcikrbjtyZXR1cm4gcy1yK249PT0wJiYoZz1lKSx7eDphLHk6Z319c3RhdGljIEdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KHQsZSxpKXtyZXR1cm4gaC5Qb2ludEluUmVjdCh0LGguR2V0SW50ZXJzZWN0QmVldHdlblR3b0xpbmUoZSxpKSl9c3RhdGljIEdldEludGVyc2VjdEJlZXR3ZW5Ud29MaW5lKHQsZSl7Y29uc3QgaT10WzBdLnktdFsxXS55LHM9ZVswXS55LWVbMV0ueSxuPXRbMV0ueC10WzBdLngsaD1lWzFdLngtZVswXS54LHI9dFswXS54KnRbMV0ueS10WzFdLngqdFswXS55LG89ZVswXS54KmVbMV0ueS1lWzFdLngqZVswXS55LGE9aSpvLXMqcixnPW4qby1oKnIsbD0tKHIqaC1vKm4pLyhpKmgtcypuKSxkPS0oaSpvLXMqcikvKGkqaC1zKm4pO2lmKGlzRmluaXRlKGwpJiZpc0Zpbml0ZShkKSlyZXR1cm57eDpsLHk6ZH07aWYoTWF0aC5hYnMoYS1nKTwuMSl0aHJvdyBuZXcgRXJyb3IoXCJTZWdtZW50IGluY2x1ZGVkXCIpO3JldHVybiBudWxsfXN0YXRpYyBHZXRDb3Jkc0Zyb21Ud29Qb2ludCh0LGUpe2NvbnN0IGk9TWF0aC5hYnModC54LWUueCkscz1NYXRoLmFicyh0LnktZS55KSxuPU1hdGgubWF4KGkscyksaD1bdF07ZnVuY3Rpb24gcih0LGUsaSxzLG4pe3JldHVybiBlPnQ/dCtuKihpL3MpOmU8dD90LW4qKGkvcyk6dH1mb3IobGV0IG89MTtvPD1uO28rPTEpaC5wdXNoKHt4OnIodC54LGUueCxpLG4sbykseTpyKHQueSxlLnkscyxuLG8pfSk7cmV0dXJuIGh9fWNsYXNzIHIgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGkpLHRoaXMuY29waWVkRWxlbWVudD1udWxsLHRoaXMudGVtcG9yYXJ5Q29weT1udWxsLHRoaXMuaXNMb2FkPSExLHRoaXMuZWxlbWVudD1lLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic3RmX19pdGVtXCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiLS1cIitpKX1uZXdUZW1wb3JhcnlDb3B5KCl7cmV0dXJuXCJoYXJkXCI9PT10aGlzLm5vd0RyYXdpbmdEZW5zaXR5P3RoaXM6KG51bGw9PT10aGlzLnRlbXBvcmFyeUNvcHkmJih0aGlzLmNvcGllZEVsZW1lbnQ9dGhpcy5lbGVtZW50LmNsb25lTm9kZSghMCksdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jb3BpZWRFbGVtZW50KSx0aGlzLnRlbXBvcmFyeUNvcHk9bmV3IHIodGhpcy5yZW5kZXIsdGhpcy5jb3BpZWRFbGVtZW50LHRoaXMubm93RHJhd2luZ0RlbnNpdHkpKSx0aGlzLmdldFRlbXBvcmFyeUNvcHkoKSl9Z2V0VGVtcG9yYXJ5Q29weSgpe3JldHVybiB0aGlzLnRlbXBvcmFyeUNvcHl9aGlkZVRlbXBvcmFyeUNvcHkoKXtudWxsIT09dGhpcy50ZW1wb3JhcnlDb3B5JiYodGhpcy5jb3BpZWRFbGVtZW50LnJlbW92ZSgpLHRoaXMuY29waWVkRWxlbWVudD1udWxsLHRoaXMudGVtcG9yYXJ5Q29weT1udWxsKX1kcmF3KHQpe2NvbnN0IGU9dHx8dGhpcy5ub3dEcmF3aW5nRGVuc2l0eSxpPXRoaXMucmVuZGVyLmNvbnZlcnRUb0dsb2JhbCh0aGlzLnN0YXRlLnBvc2l0aW9uKSxzPXRoaXMucmVuZGVyLmdldFJlY3QoKS5wYWdlV2lkdGgsbj10aGlzLnJlbmRlci5nZXRSZWN0KCkuaGVpZ2h0O3RoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiLS1zaW1wbGVcIik7Y29uc3QgaD1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHt0aGlzLmVsZW1lbnQuc3R5bGUuekluZGV4fTtcXG4gICAgICAgICAgICBsZWZ0OiAwO1xcbiAgICAgICAgICAgIHRvcDogMDtcXG4gICAgICAgICAgICB3aWR0aDogJHtzfXB4O1xcbiAgICAgICAgICAgIGhlaWdodDogJHtufXB4O1xcbiAgICAgICAgYDtcImhhcmRcIj09PWU/dGhpcy5kcmF3SGFyZChoKTp0aGlzLmRyYXdTb2Z0KGksaCl9ZHJhd0hhcmQodD1cIlwiKXtjb25zdCBlPXRoaXMucmVuZGVyLmdldFJlY3QoKS5sZWZ0K3RoaXMucmVuZGVyLmdldFJlY3QoKS53aWR0aC8yLGk9dGhpcy5zdGF0ZS5oYXJkRHJhd2luZ0FuZ2xlLHM9dCtcIlxcbiAgICAgICAgICAgICAgICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XFxuICAgICAgICAgICAgICAgIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xcbiAgICAgICAgICAgICAgICBjbGlwLXBhdGg6IG5vbmU7XFxuICAgICAgICAgICAgICAgIC13ZWJraXQtY2xpcC1wYXRoOiBub25lO1xcbiAgICAgICAgICAgIFwiKygwPT09dGhpcy5vcmllbnRhdGlvbj9gdHJhbnNmb3JtLW9yaWdpbjogJHt0aGlzLnJlbmRlci5nZXRSZWN0KCkucGFnZVdpZHRofXB4IDA7IFxcbiAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApIHJvdGF0ZVkoJHtpfWRlZyk7YDpgdHJhbnNmb3JtLW9yaWdpbjogMCAwOyBcXG4gICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgke2V9cHgsIDAsIDApIHJvdGF0ZVkoJHtpfWRlZyk7YCk7dGhpcy5lbGVtZW50LnN0eWxlLmNzc1RleHQ9c31kcmF3U29mdCh0LGU9XCJcIil7bGV0IGk9XCJwb2x5Z29uKCBcIjtmb3IoY29uc3QgdCBvZiB0aGlzLnN0YXRlLmFyZWEpaWYobnVsbCE9PXQpe2xldCBlPTE9PT10aGlzLnJlbmRlci5nZXREaXJlY3Rpb24oKT97eDotdC54K3RoaXMuc3RhdGUucG9zaXRpb24ueCx5OnQueS10aGlzLnN0YXRlLnBvc2l0aW9uLnl9Ont4OnQueC10aGlzLnN0YXRlLnBvc2l0aW9uLngseTp0LnktdGhpcy5zdGF0ZS5wb3NpdGlvbi55fTtlPWguR2V0Um90YXRlZFBvaW50KGUse3g6MCx5OjB9LHRoaXMuc3RhdGUuYW5nbGUpLGkrPWUueCtcInB4IFwiK2UueStcInB4LCBcIn1pPWkuc2xpY2UoMCwtMiksaSs9XCIpXCI7Y29uc3Qgcz1lK2B0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7IGNsaXAtcGF0aDogJHtpfTsgLXdlYmtpdC1jbGlwLXBhdGg6ICR7aX07YCsodGhpcy5yZW5kZXIuaXNTYWZhcmkoKSYmMD09PXRoaXMuc3RhdGUuYW5nbGU/YHRyYW5zZm9ybTogdHJhbnNsYXRlKCR7dC54fXB4LCAke3QueX1weCk7YDpgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgke3QueH1weCwgJHt0Lnl9cHgsIDApIHJvdGF0ZSgke3RoaXMuc3RhdGUuYW5nbGV9cmFkKTtgKTt0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dD1zfXNpbXBsZURyYXcodCl7Y29uc3QgZT10aGlzLnJlbmRlci5nZXRSZWN0KCksaT1lLnBhZ2VXaWR0aCxzPWUuaGVpZ2h0LG49MT09PXQ/ZS5sZWZ0K2UucGFnZVdpZHRoOmUubGVmdCxoPWUudG9wO3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiLS1zaW1wbGVcIiksdGhpcy5lbGVtZW50LnN0eWxlLmNzc1RleHQ9YFxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7IFxcbiAgICAgICAgICAgIGhlaWdodDogJHtzfXB4OyBcXG4gICAgICAgICAgICBsZWZ0OiAke259cHg7IFxcbiAgICAgICAgICAgIHRvcDogJHtofXB4OyBcXG4gICAgICAgICAgICB3aWR0aDogJHtpfXB4OyBcXG4gICAgICAgICAgICB6LWluZGV4OiAke3RoaXMucmVuZGVyLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrMX07YH1nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMuZWxlbWVudH1sb2FkKCl7dGhpcy5pc0xvYWQ9ITB9c2V0T3JpZW50YXRpb24odCl7c3VwZXIuc2V0T3JpZW50YXRpb24odCksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCItLWxlZnRcIixcIi0tcmlnaHRcIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoMT09PXQ/XCItLXJpZ2h0XCI6XCItLWxlZnRcIil9c2V0RHJhd2luZ0RlbnNpdHkodCl7dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCItLXNvZnRcIixcIi0taGFyZFwiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIi0tXCIrdCksc3VwZXIuc2V0RHJhd2luZ0RlbnNpdHkodCl9fWNsYXNzIG8gZXh0ZW5kcyBze2NvbnN0cnVjdG9yKHQsZSxpLHMpe3N1cGVyKHQsZSksdGhpcy5lbGVtZW50PWksdGhpcy5wYWdlc0VsZW1lbnQ9c31sb2FkKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5wYWdlc0VsZW1lbnQpe2NvbnN0IGU9bmV3IHIodGhpcy5yZW5kZXIsdCxcImhhcmRcIj09PXQuZGF0YXNldC5kZW5zaXR5P1wiaGFyZFwiOlwic29mdFwiKTtlLmxvYWQoKSx0aGlzLnBhZ2VzLnB1c2goZSl9dGhpcy5jcmVhdGVTcHJlYWQoKX19Y2xhc3MgYXtjb25zdHJ1Y3Rvcih0LGUsaSxzKXt0aGlzLmRpcmVjdGlvbj10LHRoaXMuY29ybmVyPWUsdGhpcy50b3BJbnRlcnNlY3RQb2ludD1udWxsLHRoaXMuc2lkZUludGVyc2VjdFBvaW50PW51bGwsdGhpcy5ib3R0b21JbnRlcnNlY3RQb2ludD1udWxsLHRoaXMucGFnZVdpZHRoPXBhcnNlSW50KGksMTApLHRoaXMucGFnZUhlaWdodD1wYXJzZUludChzLDEwKX1jYWxjKHQpe3RyeXtyZXR1cm4gdGhpcy5wb3NpdGlvbj10aGlzLmNhbGNBbmdsZUFuZFBvc2l0aW9uKHQpLHRoaXMuY2FsY3VsYXRlSW50ZXJzZWN0UG9pbnQodGhpcy5wb3NpdGlvbiksITB9Y2F0Y2godCl7cmV0dXJuITF9fWdldEZsaXBwaW5nQ2xpcEFyZWEoKXtjb25zdCB0PVtdO2xldCBlPSExO3JldHVybiB0LnB1c2godGhpcy5yZWN0LnRvcExlZnQpLHQucHVzaCh0aGlzLnRvcEludGVyc2VjdFBvaW50KSxudWxsPT09dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ/ZT0hMDoodC5wdXNoKHRoaXMuc2lkZUludGVyc2VjdFBvaW50KSxudWxsPT09dGhpcy5ib3R0b21JbnRlcnNlY3RQb2ludCYmKGU9ITEpKSx0LnB1c2godGhpcy5ib3R0b21JbnRlcnNlY3RQb2ludCksKGV8fFwiYm90dG9tXCI9PT10aGlzLmNvcm5lcikmJnQucHVzaCh0aGlzLnJlY3QuYm90dG9tTGVmdCksdH1nZXRCb3R0b21DbGlwQXJlYSgpe2NvbnN0IHQ9W107cmV0dXJuIHQucHVzaCh0aGlzLnRvcEludGVyc2VjdFBvaW50KSxcInRvcFwiPT09dGhpcy5jb3JuZXI/dC5wdXNoKHt4OnRoaXMucGFnZVdpZHRoLHk6MH0pOihudWxsIT09dGhpcy50b3BJbnRlcnNlY3RQb2ludCYmdC5wdXNoKHt4OnRoaXMucGFnZVdpZHRoLHk6MH0pLHQucHVzaCh7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH0pKSxudWxsIT09dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ/aC5HZXREaXN0YW5jZUJldHdlZW5Ud29Qb2ludCh0aGlzLnNpZGVJbnRlcnNlY3RQb2ludCx0aGlzLnRvcEludGVyc2VjdFBvaW50KT49MTAmJnQucHVzaCh0aGlzLnNpZGVJbnRlcnNlY3RQb2ludCk6XCJ0b3BcIj09PXRoaXMuY29ybmVyJiZ0LnB1c2goe3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9KSx0LnB1c2godGhpcy5ib3R0b21JbnRlcnNlY3RQb2ludCksdC5wdXNoKHRoaXMudG9wSW50ZXJzZWN0UG9pbnQpLHR9Z2V0QW5nbGUoKXtyZXR1cm4gMD09PXRoaXMuZGlyZWN0aW9uPy10aGlzLmFuZ2xlOnRoaXMuYW5nbGV9Z2V0UmVjdCgpe3JldHVybiB0aGlzLnJlY3R9Z2V0UG9zaXRpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbn1nZXRBY3RpdmVDb3JuZXIoKXtyZXR1cm4gMD09PXRoaXMuZGlyZWN0aW9uP3RoaXMucmVjdC50b3BMZWZ0OnRoaXMucmVjdC50b3BSaWdodH1nZXREaXJlY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJlY3Rpb259Z2V0RmxpcHBpbmdQcm9ncmVzcygpe3JldHVybiBNYXRoLmFicygodGhpcy5wb3NpdGlvbi54LXRoaXMucGFnZVdpZHRoKS8oMip0aGlzLnBhZ2VXaWR0aCkqMTAwKX1nZXRDb3JuZXIoKXtyZXR1cm4gdGhpcy5jb3JuZXJ9Z2V0Qm90dG9tUGFnZVBvc2l0aW9uKCl7cmV0dXJuIDE9PT10aGlzLmRpcmVjdGlvbj97eDp0aGlzLnBhZ2VXaWR0aCx5OjB9Ont4OjAseTowfX1nZXRTaGFkb3dTdGFydFBvaW50KCl7cmV0dXJuXCJ0b3BcIj09PXRoaXMuY29ybmVyP3RoaXMudG9wSW50ZXJzZWN0UG9pbnQ6bnVsbCE9PXRoaXMuc2lkZUludGVyc2VjdFBvaW50P3RoaXMuc2lkZUludGVyc2VjdFBvaW50OnRoaXMudG9wSW50ZXJzZWN0UG9pbnR9Z2V0U2hhZG93QW5nbGUoKXtjb25zdCB0PWguR2V0QW5nbGVCZXR3ZWVuVHdvTGluZSh0aGlzLmdldFNlZ21lbnRUb1NoYWRvd0xpbmUoKSxbe3g6MCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6MH1dKTtyZXR1cm4gMD09PXRoaXMuZGlyZWN0aW9uP3Q6TWF0aC5QSS10fWNhbGNBbmdsZUFuZFBvc2l0aW9uKHQpe2xldCBlPXQ7aWYodGhpcy51cGRhdGVBbmdsZUFuZEdlb21ldHJ5KGUpLGU9XCJ0b3BcIj09PXRoaXMuY29ybmVyP3RoaXMuY2hlY2tQb3NpdGlvbkF0Q2VudGVyTGluZShlLHt4OjAseTowfSx7eDowLHk6dGhpcy5wYWdlSGVpZ2h0fSk6dGhpcy5jaGVja1Bvc2l0aW9uQXRDZW50ZXJMaW5lKGUse3g6MCx5OnRoaXMucGFnZUhlaWdodH0se3g6MCx5OjB9KSxNYXRoLmFicyhlLngtdGhpcy5wYWdlV2lkdGgpPDEmJk1hdGguYWJzKGUueSk8MSl0aHJvdyBuZXcgRXJyb3IoXCJQb2ludCBpcyB0b28gc21hbGxcIik7cmV0dXJuIGV9dXBkYXRlQW5nbGVBbmRHZW9tZXRyeSh0KXt0aGlzLmFuZ2xlPXRoaXMuY2FsY3VsYXRlQW5nbGUodCksdGhpcy5yZWN0PXRoaXMuZ2V0UGFnZVJlY3QodCl9Y2FsY3VsYXRlQW5nbGUodCl7Y29uc3QgZT10aGlzLnBhZ2VXaWR0aC10LngrMSxpPVwiYm90dG9tXCI9PT10aGlzLmNvcm5lcj90aGlzLnBhZ2VIZWlnaHQtdC55OnQueTtsZXQgcz0yKk1hdGguYWNvcyhlL01hdGguc3FydChpKmkrZSplKSk7aTwwJiYocz0tcyk7Y29uc3Qgbj1NYXRoLlBJLXM7aWYoIWlzRmluaXRlKHMpfHxuPj0wJiZuPC4wMDMpdGhyb3cgbmV3IEVycm9yKFwiVGhlIEcgcG9pbnQgaXMgdG9vIHNtYWxsXCIpO3JldHVyblwiYm90dG9tXCI9PT10aGlzLmNvcm5lciYmKHM9LXMpLHN9Z2V0UGFnZVJlY3QodCl7cmV0dXJuXCJ0b3BcIj09PXRoaXMuY29ybmVyP3RoaXMuZ2V0UmVjdEZyb21CYXNlUG9pbnQoW3t4OjAseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9LHt4OjAseTp0aGlzLnBhZ2VIZWlnaHR9LHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fV0sdCk6dGhpcy5nZXRSZWN0RnJvbUJhc2VQb2ludChbe3g6MCx5Oi10aGlzLnBhZ2VIZWlnaHR9LHt4OnRoaXMucGFnZVdpZHRoLHk6LXRoaXMucGFnZUhlaWdodH0se3g6MCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6MH1dLHQpfWdldFJlY3RGcm9tQmFzZVBvaW50KHQsZSl7cmV0dXJue3RvcExlZnQ6dGhpcy5nZXRSb3RhdGVkUG9pbnQodFswXSxlKSx0b3BSaWdodDp0aGlzLmdldFJvdGF0ZWRQb2ludCh0WzFdLGUpLGJvdHRvbUxlZnQ6dGhpcy5nZXRSb3RhdGVkUG9pbnQodFsyXSxlKSxib3R0b21SaWdodDp0aGlzLmdldFJvdGF0ZWRQb2ludCh0WzNdLGUpfX1nZXRSb3RhdGVkUG9pbnQodCxlKXtyZXR1cm57eDp0LngqTWF0aC5jb3ModGhpcy5hbmdsZSkrdC55Kk1hdGguc2luKHRoaXMuYW5nbGUpK2UueCx5OnQueSpNYXRoLmNvcyh0aGlzLmFuZ2xlKS10LngqTWF0aC5zaW4odGhpcy5hbmdsZSkrZS55fX1jYWxjdWxhdGVJbnRlcnNlY3RQb2ludCh0KXtjb25zdCBlPXtsZWZ0Oi0xLHRvcDotMSx3aWR0aDp0aGlzLnBhZ2VXaWR0aCsyLGhlaWdodDp0aGlzLnBhZ2VIZWlnaHQrMn07XCJ0b3BcIj09PXRoaXMuY29ybmVyPyh0aGlzLnRvcEludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdCx0aGlzLnJlY3QudG9wUmlnaHRdLFt7eDowLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTowfV0pLHRoaXMuc2lkZUludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdCx0aGlzLnJlY3QuYm90dG9tTGVmdF0sW3t4OnRoaXMucGFnZVdpZHRoLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9XSksdGhpcy5ib3R0b21JbnRlcnNlY3RQb2ludD1oLkdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KGUsW3RoaXMucmVjdC5ib3R0b21MZWZ0LHRoaXMucmVjdC5ib3R0b21SaWdodF0sW3t4OjAseTp0aGlzLnBhZ2VIZWlnaHR9LHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fV0pKToodGhpcy50b3BJbnRlcnNlY3RQb2ludD1oLkdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KGUsW3RoaXMucmVjdC50b3BMZWZ0LHRoaXMucmVjdC50b3BSaWdodF0sW3t4OjAseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9XSksdGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0LHRoaXMucmVjdC50b3BMZWZ0XSxbe3g6dGhpcy5wYWdlV2lkdGgseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH1dKSx0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdGhpcy5yZWN0LmJvdHRvbUxlZnQsdGhpcy5yZWN0LmJvdHRvbVJpZ2h0XSxbe3g6MCx5OnRoaXMucGFnZUhlaWdodH0se3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9XSkpfWNoZWNrUG9zaXRpb25BdENlbnRlckxpbmUodCxlLGkpe2xldCBzPXQ7Y29uc3Qgbj1oLkxpbWl0UG9pbnRUb0NpcmNsZShlLHRoaXMucGFnZVdpZHRoLHMpO3MhPT1uJiYocz1uLHRoaXMudXBkYXRlQW5nbGVBbmRHZW9tZXRyeShzKSk7Y29uc3Qgcj1NYXRoLnNxcnQoTWF0aC5wb3codGhpcy5wYWdlV2lkdGgsMikrTWF0aC5wb3codGhpcy5wYWdlSGVpZ2h0LDIpKTtsZXQgbz10aGlzLnJlY3QuYm90dG9tUmlnaHQsYT10aGlzLnJlY3QudG9wTGVmdDtpZihcImJvdHRvbVwiPT09dGhpcy5jb3JuZXImJihvPXRoaXMucmVjdC50b3BSaWdodCxhPXRoaXMucmVjdC5ib3R0b21MZWZ0KSxvLng8PTApe2NvbnN0IHQ9aC5MaW1pdFBvaW50VG9DaXJjbGUoaSxyLGEpO3QhPT1zJiYocz10LHRoaXMudXBkYXRlQW5nbGVBbmRHZW9tZXRyeShzKSl9cmV0dXJuIHN9Z2V0U2VnbWVudFRvU2hhZG93TGluZSgpe2NvbnN0IHQ9dGhpcy5nZXRTaGFkb3dTdGFydFBvaW50KCk7cmV0dXJuW3QsdCE9PXRoaXMuc2lkZUludGVyc2VjdFBvaW50JiZudWxsIT09dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ/dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ6dGhpcy5ib3R0b21JbnRlcnNlY3RQb2ludF19fWNsYXNzIGd7Y29uc3RydWN0b3IodCxlKXt0aGlzLmZsaXBwaW5nUGFnZT1udWxsLHRoaXMuYm90dG9tUGFnZT1udWxsLHRoaXMuY2FsYz1udWxsLHRoaXMuc3RhdGU9XCJyZWFkXCIsdGhpcy5yZW5kZXI9dCx0aGlzLmFwcD1lfWZvbGQodCl7dGhpcy5zZXRTdGF0ZShcInVzZXJfZm9sZFwiKSxudWxsPT09dGhpcy5jYWxjJiZ0aGlzLnN0YXJ0KHQpLHRoaXMuZG8odGhpcy5yZW5kZXIuY29udmVydFRvUGFnZSh0KSl9ZmxpcCh0KXtpZih0aGlzLmFwcC5nZXRTZXR0aW5ncygpLmRpc2FibGVGbGlwQnlDbGljayYmIXRoaXMuaXNQb2ludE9uQ29ybmVycyh0KSlyZXR1cm47aWYobnVsbCE9PXRoaXMuY2FsYyYmdGhpcy5yZW5kZXIuZmluaXNoQW5pbWF0aW9uKCksIXRoaXMuc3RhcnQodCkpcmV0dXJuO2NvbnN0IGU9dGhpcy5nZXRCb3VuZHNSZWN0KCk7dGhpcy5zZXRTdGF0ZShcImZsaXBwaW5nXCIpO2NvbnN0IGk9ZS5oZWlnaHQvMTAscz1cImJvdHRvbVwiPT09dGhpcy5jYWxjLmdldENvcm5lcigpP2UuaGVpZ2h0LWk6aSxuPVwiYm90dG9tXCI9PT10aGlzLmNhbGMuZ2V0Q29ybmVyKCk/ZS5oZWlnaHQ6MDt0aGlzLmNhbGMuY2FsYyh7eDplLnBhZ2VXaWR0aC1pLHk6c30pLHRoaXMuYW5pbWF0ZUZsaXBwaW5nVG8oe3g6ZS5wYWdlV2lkdGgtaSx5OnN9LHt4Oi1lLnBhZ2VXaWR0aCx5Om59LCEwKX1zdGFydCh0KXt0aGlzLnJlc2V0KCk7Y29uc3QgZT10aGlzLnJlbmRlci5jb252ZXJ0VG9Cb29rKHQpLGk9dGhpcy5nZXRCb3VuZHNSZWN0KCkscz10aGlzLmdldERpcmVjdGlvbkJ5UG9pbnQoZSksbj1lLnk+PWkuaGVpZ2h0LzI/XCJib3R0b21cIjpcInRvcFwiO2lmKCF0aGlzLmNoZWNrRGlyZWN0aW9uKHMpKXJldHVybiExO3RyeXtpZih0aGlzLmZsaXBwaW5nUGFnZT10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLmdldEZsaXBwaW5nUGFnZShzKSx0aGlzLmJvdHRvbVBhZ2U9dGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5nZXRCb3R0b21QYWdlKHMpLFwibGFuZHNjYXBlXCI9PT10aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpKWlmKDE9PT1zKXtjb25zdCB0PXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkubmV4dEJ5KHRoaXMuZmxpcHBpbmdQYWdlKTtudWxsIT09dCYmdGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RGVuc2l0eSgpIT09dC5nZXREZW5zaXR5KCkmJih0aGlzLmZsaXBwaW5nUGFnZS5zZXREcmF3aW5nRGVuc2l0eShcImhhcmRcIiksdC5zZXREcmF3aW5nRGVuc2l0eShcImhhcmRcIikpfWVsc2V7Y29uc3QgdD10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLnByZXZCeSh0aGlzLmZsaXBwaW5nUGFnZSk7bnVsbCE9PXQmJnRoaXMuZmxpcHBpbmdQYWdlLmdldERlbnNpdHkoKSE9PXQuZ2V0RGVuc2l0eSgpJiYodGhpcy5mbGlwcGluZ1BhZ2Uuc2V0RHJhd2luZ0RlbnNpdHkoXCJoYXJkXCIpLHQuc2V0RHJhd2luZ0RlbnNpdHkoXCJoYXJkXCIpKX1yZXR1cm4gdGhpcy5yZW5kZXIuc2V0RGlyZWN0aW9uKHMpLHRoaXMuY2FsYz1uZXcgYShzLG4saS5wYWdlV2lkdGgudG9TdHJpbmcoMTApLGkuaGVpZ2h0LnRvU3RyaW5nKDEwKSksITB9Y2F0Y2godCl7cmV0dXJuITF9fWRvKHQpe2lmKG51bGwhPT10aGlzLmNhbGMmJnRoaXMuY2FsYy5jYWxjKHQpKXtjb25zdCB0PXRoaXMuY2FsYy5nZXRGbGlwcGluZ1Byb2dyZXNzKCk7dGhpcy5ib3R0b21QYWdlLnNldEFyZWEodGhpcy5jYWxjLmdldEJvdHRvbUNsaXBBcmVhKCkpLHRoaXMuYm90dG9tUGFnZS5zZXRQb3NpdGlvbih0aGlzLmNhbGMuZ2V0Qm90dG9tUGFnZVBvc2l0aW9uKCkpLHRoaXMuYm90dG9tUGFnZS5zZXRBbmdsZSgwKSx0aGlzLmJvdHRvbVBhZ2Uuc2V0SGFyZEFuZ2xlKDApLHRoaXMuZmxpcHBpbmdQYWdlLnNldEFyZWEodGhpcy5jYWxjLmdldEZsaXBwaW5nQ2xpcEFyZWEoKSksdGhpcy5mbGlwcGluZ1BhZ2Uuc2V0UG9zaXRpb24odGhpcy5jYWxjLmdldEFjdGl2ZUNvcm5lcigpKSx0aGlzLmZsaXBwaW5nUGFnZS5zZXRBbmdsZSh0aGlzLmNhbGMuZ2V0QW5nbGUoKSksMD09PXRoaXMuY2FsYy5nZXREaXJlY3Rpb24oKT90aGlzLmZsaXBwaW5nUGFnZS5zZXRIYXJkQW5nbGUoOTAqKDIwMC0yKnQpLzEwMCk6dGhpcy5mbGlwcGluZ1BhZ2Uuc2V0SGFyZEFuZ2xlKC05MCooMjAwLTIqdCkvMTAwKSx0aGlzLnJlbmRlci5zZXRQYWdlUmVjdCh0aGlzLmNhbGMuZ2V0UmVjdCgpKSx0aGlzLnJlbmRlci5zZXRCb3R0b21QYWdlKHRoaXMuYm90dG9tUGFnZSksdGhpcy5yZW5kZXIuc2V0RmxpcHBpbmdQYWdlKHRoaXMuZmxpcHBpbmdQYWdlKSx0aGlzLnJlbmRlci5zZXRTaGFkb3dEYXRhKHRoaXMuY2FsYy5nZXRTaGFkb3dTdGFydFBvaW50KCksdGhpcy5jYWxjLmdldFNoYWRvd0FuZ2xlKCksdCx0aGlzLmNhbGMuZ2V0RGlyZWN0aW9uKCkpfX1mbGlwVG9QYWdlKHQsZSl7Y29uc3QgaT10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLmdldEN1cnJlbnRTcHJlYWRJbmRleCgpLHM9dGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5nZXRTcHJlYWRJbmRleEJ5UGFnZSh0KTt0cnl7cz5pJiYodGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5zZXRDdXJyZW50U3ByZWFkSW5kZXgocy0xKSx0aGlzLmZsaXBOZXh0KGUpKSxzPGkmJih0aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLnNldEN1cnJlbnRTcHJlYWRJbmRleChzKzEpLHRoaXMuZmxpcFByZXYoZSkpfWNhdGNoKHQpe319ZmxpcE5leHQodCl7dGhpcy5mbGlwKHt4OnRoaXMucmVuZGVyLmdldFJlY3QoKS5sZWZ0KzIqdGhpcy5yZW5kZXIuZ2V0UmVjdCgpLnBhZ2VXaWR0aC0xMCx5OlwidG9wXCI9PT10PzE6dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmhlaWdodC0yfSl9ZmxpcFByZXYodCl7dGhpcy5mbGlwKHt4OjEwLHk6XCJ0b3BcIj09PXQ/MTp0aGlzLnJlbmRlci5nZXRSZWN0KCkuaGVpZ2h0LTJ9KX1zdG9wTW92ZSgpe2lmKG51bGw9PT10aGlzLmNhbGMpcmV0dXJuO2NvbnN0IHQ9dGhpcy5jYWxjLmdldFBvc2l0aW9uKCksZT10aGlzLmdldEJvdW5kc1JlY3QoKSxpPVwiYm90dG9tXCI9PT10aGlzLmNhbGMuZ2V0Q29ybmVyKCk/ZS5oZWlnaHQ6MDt0Lng8PTA/dGhpcy5hbmltYXRlRmxpcHBpbmdUbyh0LHt4Oi1lLnBhZ2VXaWR0aCx5Oml9LCEwKTp0aGlzLmFuaW1hdGVGbGlwcGluZ1RvKHQse3g6ZS5wYWdlV2lkdGgseTppfSwhMSl9c2hvd0Nvcm5lcih0KXtpZighdGhpcy5jaGVja1N0YXRlKFwicmVhZFwiLFwiZm9sZF9jb3JuZXJcIikpcmV0dXJuO2NvbnN0IGU9dGhpcy5nZXRCb3VuZHNSZWN0KCksaT1lLnBhZ2VXaWR0aDtpZih0aGlzLmlzUG9pbnRPbkNvcm5lcnModCkpaWYobnVsbD09PXRoaXMuY2FsYyl7aWYoIXRoaXMuc3RhcnQodCkpcmV0dXJuO3RoaXMuc2V0U3RhdGUoXCJmb2xkX2Nvcm5lclwiKSx0aGlzLmNhbGMuY2FsYyh7eDppLTEseToxfSk7Y29uc3Qgcz01MCxuPVwiYm90dG9tXCI9PT10aGlzLmNhbGMuZ2V0Q29ybmVyKCk/ZS5oZWlnaHQtMToxLGg9XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodC1zOnM7dGhpcy5hbmltYXRlRmxpcHBpbmdUbyh7eDppLTEseTpufSx7eDppLXMseTpofSwhMSwhMSl9ZWxzZSB0aGlzLmRvKHRoaXMucmVuZGVyLmNvbnZlcnRUb1BhZ2UodCkpO2Vsc2UgdGhpcy5zZXRTdGF0ZShcInJlYWRcIiksdGhpcy5yZW5kZXIuZmluaXNoQW5pbWF0aW9uKCksdGhpcy5zdG9wTW92ZSgpfWFuaW1hdGVGbGlwcGluZ1RvKHQsZSxpLHM9ITApe2NvbnN0IG49aC5HZXRDb3Jkc0Zyb21Ud29Qb2ludCh0LGUpLHI9W107Zm9yKGNvbnN0IHQgb2YgbilyLnB1c2goKCk9PnRoaXMuZG8odCkpO2NvbnN0IG89dGhpcy5nZXRBbmltYXRpb25EdXJhdGlvbihuLmxlbmd0aCk7dGhpcy5yZW5kZXIuc3RhcnRBbmltYXRpb24ocixvLCgpPT57dGhpcy5jYWxjJiYoaSYmKDE9PT10aGlzLmNhbGMuZ2V0RGlyZWN0aW9uKCk/dGhpcy5hcHAudHVyblRvUHJldlBhZ2UoKTp0aGlzLmFwcC50dXJuVG9OZXh0UGFnZSgpKSxzJiYodGhpcy5yZW5kZXIuc2V0Qm90dG9tUGFnZShudWxsKSx0aGlzLnJlbmRlci5zZXRGbGlwcGluZ1BhZ2UobnVsbCksdGhpcy5yZW5kZXIuY2xlYXJTaGFkb3coKSx0aGlzLnNldFN0YXRlKFwicmVhZFwiKSx0aGlzLnJlc2V0KCkpKX0pfWdldENhbGN1bGF0aW9uKCl7cmV0dXJuIHRoaXMuY2FsY31nZXRTdGF0ZSgpe3JldHVybiB0aGlzLnN0YXRlfXNldFN0YXRlKHQpe3RoaXMuc3RhdGUhPT10JiYodGhpcy5hcHAudXBkYXRlU3RhdGUodCksdGhpcy5zdGF0ZT10KX1nZXREaXJlY3Rpb25CeVBvaW50KHQpe2NvbnN0IGU9dGhpcy5nZXRCb3VuZHNSZWN0KCk7aWYoXCJwb3J0cmFpdFwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSl7aWYodC54LWUucGFnZVdpZHRoPD1lLndpZHRoLzUpcmV0dXJuIDF9ZWxzZSBpZih0Lng8ZS53aWR0aC8yKXJldHVybiAxO3JldHVybiAwfWdldEFuaW1hdGlvbkR1cmF0aW9uKHQpe2NvbnN0IGU9dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5mbGlwcGluZ1RpbWU7cmV0dXJuIHQ+PTFlMz9lOnQvMWUzKmV9Y2hlY2tEaXJlY3Rpb24odCl7cmV0dXJuIDA9PT10P3RoaXMuYXBwLmdldEN1cnJlbnRQYWdlSW5kZXgoKTx0aGlzLmFwcC5nZXRQYWdlQ291bnQoKS0xOnRoaXMuYXBwLmdldEN1cnJlbnRQYWdlSW5kZXgoKT49MX1yZXNldCgpe3RoaXMuY2FsYz1udWxsLHRoaXMuZmxpcHBpbmdQYWdlPW51bGwsdGhpcy5ib3R0b21QYWdlPW51bGx9Z2V0Qm91bmRzUmVjdCgpe3JldHVybiB0aGlzLnJlbmRlci5nZXRSZWN0KCl9Y2hlY2tTdGF0ZSguLi50KXtmb3IoY29uc3QgZSBvZiB0KWlmKHRoaXMuc3RhdGU9PT1lKXJldHVybiEwO3JldHVybiExfWlzUG9pbnRPbkNvcm5lcnModCl7Y29uc3QgZT10aGlzLmdldEJvdW5kc1JlY3QoKSxpPWUucGFnZVdpZHRoLHM9TWF0aC5zcXJ0KE1hdGgucG93KGksMikrTWF0aC5wb3coZS5oZWlnaHQsMikpLzUsbj10aGlzLnJlbmRlci5jb252ZXJ0VG9Cb29rKHQpO3JldHVybiBuLng+MCYmbi55PjAmJm4ueDxlLndpZHRoJiZuLnk8ZS5oZWlnaHQmJihuLng8c3x8bi54PmUud2lkdGgtcykmJihuLnk8c3x8bi55PmUuaGVpZ2h0LXMpfX1jbGFzcyBse2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5sZWZ0UGFnZT1udWxsLHRoaXMucmlnaHRQYWdlPW51bGwsdGhpcy5mbGlwcGluZ1BhZ2U9bnVsbCx0aGlzLmJvdHRvbVBhZ2U9bnVsbCx0aGlzLmRpcmVjdGlvbj1udWxsLHRoaXMub3JpZW50YXRpb249bnVsbCx0aGlzLnNoYWRvdz1udWxsLHRoaXMuYW5pbWF0aW9uPW51bGwsdGhpcy5wYWdlUmVjdD1udWxsLHRoaXMuYm91bmRzUmVjdD1udWxsLHRoaXMudGltZXI9MCx0aGlzLnNhZmFyaT0hMSx0aGlzLnNldHRpbmc9ZSx0aGlzLmFwcD10O2NvbnN0IGk9bmV3IFJlZ0V4cChcIlZlcnNpb25cXFxcL1tcXFxcZFxcXFwuXSsuKlNhZmFyaS9cIik7dGhpcy5zYWZhcmk9bnVsbCE9PWkuZXhlYyh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCl9cmVuZGVyKHQpe2lmKG51bGwhPT10aGlzLmFuaW1hdGlvbil7Y29uc3QgZT1NYXRoLnJvdW5kKCh0LXRoaXMuYW5pbWF0aW9uLnN0YXJ0ZWRBdCkvdGhpcy5hbmltYXRpb24uZHVyYXRpb25GcmFtZSk7ZTx0aGlzLmFuaW1hdGlvbi5mcmFtZXMubGVuZ3RoP3RoaXMuYW5pbWF0aW9uLmZyYW1lc1tlXSgpOih0aGlzLmFuaW1hdGlvbi5vbkFuaW1hdGVFbmQoKSx0aGlzLmFuaW1hdGlvbj1udWxsKX10aGlzLnRpbWVyPXQsdGhpcy5kcmF3RnJhbWUoKX1zdGFydCgpe3RoaXMudXBkYXRlKCk7Y29uc3QgdD1lPT57dGhpcy5yZW5kZXIoZSkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpfTtyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCl9c3RhcnRBbmltYXRpb24odCxlLGkpe3RoaXMuZmluaXNoQW5pbWF0aW9uKCksdGhpcy5hbmltYXRpb249e2ZyYW1lczp0LGR1cmF0aW9uOmUsZHVyYXRpb25GcmFtZTplL3QubGVuZ3RoLG9uQW5pbWF0ZUVuZDppLHN0YXJ0ZWRBdDp0aGlzLnRpbWVyfX1maW5pc2hBbmltYXRpb24oKXtudWxsIT09dGhpcy5hbmltYXRpb24mJih0aGlzLmFuaW1hdGlvbi5mcmFtZXNbdGhpcy5hbmltYXRpb24uZnJhbWVzLmxlbmd0aC0xXSgpLG51bGwhPT10aGlzLmFuaW1hdGlvbi5vbkFuaW1hdGVFbmQmJnRoaXMuYW5pbWF0aW9uLm9uQW5pbWF0ZUVuZCgpKSx0aGlzLmFuaW1hdGlvbj1udWxsfXVwZGF0ZSgpe3RoaXMuYm91bmRzUmVjdD1udWxsO2NvbnN0IHQ9dGhpcy5jYWxjdWxhdGVCb3VuZHNSZWN0KCk7dGhpcy5vcmllbnRhdGlvbiE9PXQmJih0aGlzLm9yaWVudGF0aW9uPXQsdGhpcy5hcHAudXBkYXRlT3JpZW50YXRpb24odCkpfWNhbGN1bGF0ZUJvdW5kc1JlY3QoKXtsZXQgdD1cImxhbmRzY2FwZVwiO2NvbnN0IGU9dGhpcy5nZXRCbG9ja1dpZHRoKCksaT1lLzIscz10aGlzLmdldEJsb2NrSGVpZ2h0KCkvMixuPXRoaXMuc2V0dGluZy53aWR0aC90aGlzLnNldHRpbmcuaGVpZ2h0O2xldCBoPXRoaXMuc2V0dGluZy53aWR0aCxyPXRoaXMuc2V0dGluZy5oZWlnaHQsbz1pLWg7cmV0dXJuXCJzdHJldGNoXCI9PT10aGlzLnNldHRpbmcuc2l6ZT8oZTwyKnRoaXMuc2V0dGluZy5taW5XaWR0aCYmdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS51c2VQb3J0cmFpdCYmKHQ9XCJwb3J0cmFpdFwiKSxoPVwicG9ydHJhaXRcIj09PXQ/dGhpcy5nZXRCbG9ja1dpZHRoKCk6dGhpcy5nZXRCbG9ja1dpZHRoKCkvMixoPnRoaXMuc2V0dGluZy5tYXhXaWR0aCYmKGg9dGhpcy5zZXR0aW5nLm1heFdpZHRoKSxyPWgvbixyPnRoaXMuZ2V0QmxvY2tIZWlnaHQoKSYmKHI9dGhpcy5nZXRCbG9ja0hlaWdodCgpLGg9cipuKSxvPVwicG9ydHJhaXRcIj09PXQ/aS1oLzItaDppLWgpOmU8MipoJiZ0aGlzLmFwcC5nZXRTZXR0aW5ncygpLnVzZVBvcnRyYWl0JiYodD1cInBvcnRyYWl0XCIsbz1pLWgvMi1oKSx0aGlzLmJvdW5kc1JlY3Q9e2xlZnQ6byx0b3A6cy1yLzIsd2lkdGg6MipoLGhlaWdodDpyLHBhZ2VXaWR0aDpofSx0fXNldFNoYWRvd0RhdGEodCxlLGkscyl7aWYoIXRoaXMuYXBwLmdldFNldHRpbmdzKCkuZHJhd1NoYWRvdylyZXR1cm47Y29uc3Qgbj0xMDAqdGhpcy5nZXRTZXR0aW5ncygpLm1heFNoYWRvd09wYWNpdHk7dGhpcy5zaGFkb3c9e3Bvczp0LGFuZ2xlOmUsd2lkdGg6Myp0aGlzLmdldFJlY3QoKS5wYWdlV2lkdGgvNCppLzEwMCxvcGFjaXR5OigxMDAtaSkqbi8xMDAvMTAwLGRpcmVjdGlvbjpzLHByb2dyZXNzOjIqaX19Y2xlYXJTaGFkb3coKXt0aGlzLnNoYWRvdz1udWxsfWdldEJsb2NrV2lkdGgoKXtyZXR1cm4gdGhpcy5hcHAuZ2V0VUkoKS5nZXREaXN0RWxlbWVudCgpLm9mZnNldFdpZHRofWdldEJsb2NrSGVpZ2h0KCl7cmV0dXJuIHRoaXMuYXBwLmdldFVJKCkuZ2V0RGlzdEVsZW1lbnQoKS5vZmZzZXRIZWlnaHR9Z2V0RGlyZWN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0aW9ufWdldFJlY3QoKXtyZXR1cm4gbnVsbD09PXRoaXMuYm91bmRzUmVjdCYmdGhpcy5jYWxjdWxhdGVCb3VuZHNSZWN0KCksdGhpcy5ib3VuZHNSZWN0fWdldFNldHRpbmdzKCl7cmV0dXJuIHRoaXMuYXBwLmdldFNldHRpbmdzKCl9Z2V0T3JpZW50YXRpb24oKXtyZXR1cm4gdGhpcy5vcmllbnRhdGlvbn1zZXRQYWdlUmVjdCh0KXt0aGlzLnBhZ2VSZWN0PXR9c2V0RGlyZWN0aW9uKHQpe3RoaXMuZGlyZWN0aW9uPXR9c2V0UmlnaHRQYWdlKHQpe251bGwhPT10JiZ0LnNldE9yaWVudGF0aW9uKDEpLHRoaXMucmlnaHRQYWdlPXR9c2V0TGVmdFBhZ2UodCl7bnVsbCE9PXQmJnQuc2V0T3JpZW50YXRpb24oMCksdGhpcy5sZWZ0UGFnZT10fXNldEJvdHRvbVBhZ2UodCl7bnVsbCE9PXQmJnQuc2V0T3JpZW50YXRpb24oMT09PXRoaXMuZGlyZWN0aW9uPzA6MSksdGhpcy5ib3R0b21QYWdlPXR9c2V0RmxpcHBpbmdQYWdlKHQpe251bGwhPT10JiZ0LnNldE9yaWVudGF0aW9uKDA9PT10aGlzLmRpcmVjdGlvbiYmXCJwb3J0cmFpdFwiIT09dGhpcy5vcmllbnRhdGlvbj8wOjEpLHRoaXMuZmxpcHBpbmdQYWdlPXR9Y29udmVydFRvQm9vayh0KXtjb25zdCBlPXRoaXMuZ2V0UmVjdCgpO3JldHVybnt4OnQueC1lLmxlZnQseTp0LnktZS50b3B9fWlzU2FmYXJpKCl7cmV0dXJuIHRoaXMuc2FmYXJpfWNvbnZlcnRUb1BhZ2UodCxlKXtlfHwoZT10aGlzLmRpcmVjdGlvbik7Y29uc3QgaT10aGlzLmdldFJlY3QoKTtyZXR1cm57eDowPT09ZT90LngtaS5sZWZ0LWkud2lkdGgvMjppLndpZHRoLzItdC54K2kubGVmdCx5OnQueS1pLnRvcH19Y29udmVydFRvR2xvYmFsKHQsZSl7aWYoZXx8KGU9dGhpcy5kaXJlY3Rpb24pLG51bGw9PXQpcmV0dXJuIG51bGw7Y29uc3QgaT10aGlzLmdldFJlY3QoKTtyZXR1cm57eDowPT09ZT90LngraS5sZWZ0K2kud2lkdGgvMjppLndpZHRoLzItdC54K2kubGVmdCx5OnQueStpLnRvcH19Y29udmVydFJlY3RUb0dsb2JhbCh0LGUpe3JldHVybiBlfHwoZT10aGlzLmRpcmVjdGlvbikse3RvcExlZnQ6dGhpcy5jb252ZXJ0VG9HbG9iYWwodC50b3BMZWZ0LGUpLHRvcFJpZ2h0OnRoaXMuY29udmVydFRvR2xvYmFsKHQudG9wUmlnaHQsZSksYm90dG9tTGVmdDp0aGlzLmNvbnZlcnRUb0dsb2JhbCh0LmJvdHRvbUxlZnQsZSksYm90dG9tUmlnaHQ6dGhpcy5jb252ZXJ0VG9HbG9iYWwodC5ib3R0b21SaWdodCxlKX19fWNsYXNzIGQgZXh0ZW5kcyBse2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGUpLHRoaXMuY2FudmFzPWksdGhpcy5jdHg9aS5nZXRDb250ZXh0KFwiMmRcIil9Z2V0Q29udGV4dCgpe3JldHVybiB0aGlzLmN0eH1yZWxvYWQoKXt9ZHJhd0ZyYW1lKCl7dGhpcy5jbGVhcigpLFwicG9ydHJhaXRcIiE9PXRoaXMub3JpZW50YXRpb24mJm51bGwhPXRoaXMubGVmdFBhZ2UmJnRoaXMubGVmdFBhZ2Uuc2ltcGxlRHJhdygwKSxudWxsIT10aGlzLnJpZ2h0UGFnZSYmdGhpcy5yaWdodFBhZ2Uuc2ltcGxlRHJhdygxKSxudWxsIT10aGlzLmJvdHRvbVBhZ2UmJnRoaXMuYm90dG9tUGFnZS5kcmF3KCksdGhpcy5kcmF3Qm9va1NoYWRvdygpLG51bGwhPXRoaXMuZmxpcHBpbmdQYWdlJiZ0aGlzLmZsaXBwaW5nUGFnZS5kcmF3KCksbnVsbCE9dGhpcy5zaGFkb3cmJih0aGlzLmRyYXdPdXRlclNoYWRvdygpLHRoaXMuZHJhd0lubmVyU2hhZG93KCkpO2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCk7XCJwb3J0cmFpdFwiPT09dGhpcy5vcmllbnRhdGlvbiYmKHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LnJlY3QodC5sZWZ0K3QucGFnZVdpZHRoLHQudG9wLHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuY3R4LmNsaXAoKSl9ZHJhd0Jvb2tTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpO3RoaXMuY3R4LnNhdmUoKSx0aGlzLmN0eC5iZWdpblBhdGgoKTtjb25zdCBlPXQud2lkdGgvMjA7dGhpcy5jdHgucmVjdCh0LmxlZnQsdC50b3AsdC53aWR0aCx0LmhlaWdodCk7Y29uc3QgaT17eDp0LmxlZnQrdC53aWR0aC8yLWUvMix5OjB9O3RoaXMuY3R4LnRyYW5zbGF0ZShpLngsaS55KTtjb25zdCBzPXRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsMCxlLDApO3MuYWRkQ29sb3JTdG9wKDAsXCJyZ2JhKDAsIDAsIDAsIDApXCIpLHMuYWRkQ29sb3JTdG9wKC40LFwicmdiYSgwLCAwLCAwLCAwLjIpXCIpLHMuYWRkQ29sb3JTdG9wKC40OSxcInJnYmEoMCwgMCwgMCwgMC4xKVwiKSxzLmFkZENvbG9yU3RvcCguNSxcInJnYmEoMCwgMCwgMCwgMC41KVwiKSxzLmFkZENvbG9yU3RvcCguNTEsXCJyZ2JhKDAsIDAsIDAsIDAuNClcIikscy5hZGRDb2xvclN0b3AoMSxcInJnYmEoMCwgMCwgMCwgMClcIiksdGhpcy5jdHguY2xpcCgpLHRoaXMuY3R4LmZpbGxTdHlsZT1zLHRoaXMuY3R4LmZpbGxSZWN0KDAsMCxlLDIqdC5oZWlnaHQpLHRoaXMuY3R4LnJlc3RvcmUoKX1kcmF3T3V0ZXJTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpO3RoaXMuY3R4LnNhdmUoKSx0aGlzLmN0eC5iZWdpblBhdGgoKSx0aGlzLmN0eC5yZWN0KHQubGVmdCx0LnRvcCx0LndpZHRoLHQuaGVpZ2h0KTtjb25zdCBlPXRoaXMuY29udmVydFRvR2xvYmFsKHt4OnRoaXMuc2hhZG93LnBvcy54LHk6dGhpcy5zaGFkb3cucG9zLnl9KTt0aGlzLmN0eC50cmFuc2xhdGUoZS54LGUueSksdGhpcy5jdHgucm90YXRlKE1hdGguUEkrdGhpcy5zaGFkb3cuYW5nbGUrTWF0aC5QSS8yKTtjb25zdCBpPXRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsMCx0aGlzLnNoYWRvdy53aWR0aCwwKTswPT09dGhpcy5zaGFkb3cuZGlyZWN0aW9uPyh0aGlzLmN0eC50cmFuc2xhdGUoMCwtMTAwKSxpLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSxpLmFkZENvbG9yU3RvcCgxLFwicmdiYSgwLCAwLCAwLCAwKVwiKSk6KHRoaXMuY3R4LnRyYW5zbGF0ZSgtdGhpcy5zaGFkb3cud2lkdGgsLTEwMCksaS5hZGRDb2xvclN0b3AoMCxcInJnYmEoMCwgMCwgMCwgMClcIiksaS5hZGRDb2xvclN0b3AoMSxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIikpLHRoaXMuY3R4LmNsaXAoKSx0aGlzLmN0eC5maWxsU3R5bGU9aSx0aGlzLmN0eC5maWxsUmVjdCgwLDAsdGhpcy5zaGFkb3cud2lkdGgsMip0LmhlaWdodCksdGhpcy5jdHgucmVzdG9yZSgpfWRyYXdJbm5lclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCk7dGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpO2NvbnN0IGU9dGhpcy5jb252ZXJ0VG9HbG9iYWwoe3g6dGhpcy5zaGFkb3cucG9zLngseTp0aGlzLnNoYWRvdy5wb3MueX0pLGk9dGhpcy5jb252ZXJ0UmVjdFRvR2xvYmFsKHRoaXMucGFnZVJlY3QpO3RoaXMuY3R4Lm1vdmVUbyhpLnRvcExlZnQueCxpLnRvcExlZnQueSksdGhpcy5jdHgubGluZVRvKGkudG9wUmlnaHQueCxpLnRvcFJpZ2h0LnkpLHRoaXMuY3R4LmxpbmVUbyhpLmJvdHRvbVJpZ2h0LngsaS5ib3R0b21SaWdodC55KSx0aGlzLmN0eC5saW5lVG8oaS5ib3R0b21MZWZ0LngsaS5ib3R0b21MZWZ0LnkpLHRoaXMuY3R4LnRyYW5zbGF0ZShlLngsZS55KSx0aGlzLmN0eC5yb3RhdGUoTWF0aC5QSSt0aGlzLnNoYWRvdy5hbmdsZStNYXRoLlBJLzIpO2NvbnN0IHM9Myp0aGlzLnNoYWRvdy53aWR0aC80LG49dGhpcy5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLHMsMCk7MD09PXRoaXMuc2hhZG93LmRpcmVjdGlvbj8odGhpcy5jdHgudHJhbnNsYXRlKC1zLC0xMDApLG4uYWRkQ29sb3JTdG9wKDEsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpLG4uYWRkQ29sb3JTdG9wKC45LFwicmdiYSgwLCAwLCAwLCAwLjA1KVwiKSxuLmFkZENvbG9yU3RvcCguNyxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIiksbi5hZGRDb2xvclN0b3AoMCxcInJnYmEoMCwgMCwgMCwgMClcIikpOih0aGlzLmN0eC50cmFuc2xhdGUoMCwtMTAwKSxuLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSxuLmFkZENvbG9yU3RvcCguMSxcInJnYmEoMCwgMCwgMCwgMC4wNSlcIiksbi5hZGRDb2xvclN0b3AoLjMsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpLG4uYWRkQ29sb3JTdG9wKDEsXCJyZ2JhKDAsIDAsIDAsIDApXCIpKSx0aGlzLmN0eC5jbGlwKCksdGhpcy5jdHguZmlsbFN0eWxlPW4sdGhpcy5jdHguZmlsbFJlY3QoMCwwLHMsMip0LmhlaWdodCksdGhpcy5jdHgucmVzdG9yZSgpfWNsZWFyKCl7dGhpcy5jdHguZmlsbFN0eWxlPVwid2hpdGVcIix0aGlzLmN0eC5maWxsUmVjdCgwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KX19Y2xhc3MgcHtjb25zdHJ1Y3Rvcih0LGUsaSl7dGhpcy50b3VjaFBvaW50PW51bGwsdGhpcy5zd2lwZVRpbWVvdXQ9MjUwLHRoaXMub25SZXNpemU9KCk9Pnt0aGlzLnVwZGF0ZSgpfSx0aGlzLm9uTW91c2VEb3duPXQ9PntpZih0aGlzLmNoZWNrVGFyZ2V0KHQudGFyZ2V0KSl7Y29uc3QgZT10aGlzLmdldE1vdXNlUG9zKHQuY2xpZW50WCx0LmNsaWVudFkpO3RoaXMuYXBwLnN0YXJ0VXNlclRvdWNoKGUpLHQucHJldmVudERlZmF1bHQoKX19LHRoaXMub25Ub3VjaFN0YXJ0PXQ9PntpZih0aGlzLmNoZWNrVGFyZ2V0KHQudGFyZ2V0KSYmdC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg+MCl7Y29uc3QgZT10LmNoYW5nZWRUb3VjaGVzWzBdLGk9dGhpcy5nZXRNb3VzZVBvcyhlLmNsaWVudFgsZS5jbGllbnRZKTt0aGlzLnRvdWNoUG9pbnQ9e3BvaW50OmksdGltZTpEYXRlLm5vdygpfSxzZXRUaW1lb3V0KCgpPT57bnVsbCE9PXRoaXMudG91Y2hQb2ludCYmdGhpcy5hcHAuc3RhcnRVc2VyVG91Y2goaSl9LHRoaXMuc3dpcGVUaW1lb3V0KSx0aGlzLmFwcC5nZXRTZXR0aW5ncygpLm1vYmlsZVNjcm9sbFN1cHBvcnR8fHQucHJldmVudERlZmF1bHQoKX19LHRoaXMub25Nb3VzZVVwPXQ9Pntjb25zdCBlPXRoaXMuZ2V0TW91c2VQb3ModC5jbGllbnRYLHQuY2xpZW50WSk7dGhpcy5hcHAudXNlclN0b3AoZSl9LHRoaXMub25Nb3VzZU1vdmU9dD0+e2NvbnN0IGU9dGhpcy5nZXRNb3VzZVBvcyh0LmNsaWVudFgsdC5jbGllbnRZKTt0aGlzLmFwcC51c2VyTW92ZShlLCExKX0sdGhpcy5vblRvdWNoTW92ZT10PT57aWYodC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg+MCl7Y29uc3QgZT10LmNoYW5nZWRUb3VjaGVzWzBdLGk9dGhpcy5nZXRNb3VzZVBvcyhlLmNsaWVudFgsZS5jbGllbnRZKTt0aGlzLmFwcC5nZXRTZXR0aW5ncygpLm1vYmlsZVNjcm9sbFN1cHBvcnQ/KG51bGwhPT10aGlzLnRvdWNoUG9pbnQmJihNYXRoLmFicyh0aGlzLnRvdWNoUG9pbnQucG9pbnQueC1pLngpPjEwfHxcInJlYWRcIiE9PXRoaXMuYXBwLmdldFN0YXRlKCkpJiZ0LmNhbmNlbGFibGUmJnRoaXMuYXBwLnVzZXJNb3ZlKGksITApLFwicmVhZFwiIT09dGhpcy5hcHAuZ2V0U3RhdGUoKSYmdC5wcmV2ZW50RGVmYXVsdCgpKTp0aGlzLmFwcC51c2VyTW92ZShpLCEwKX19LHRoaXMub25Ub3VjaEVuZD10PT57aWYodC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg+MCl7Y29uc3QgZT10LmNoYW5nZWRUb3VjaGVzWzBdLGk9dGhpcy5nZXRNb3VzZVBvcyhlLmNsaWVudFgsZS5jbGllbnRZKTtsZXQgcz0hMTtpZihudWxsIT09dGhpcy50b3VjaFBvaW50KXtjb25zdCB0PWkueC10aGlzLnRvdWNoUG9pbnQucG9pbnQueCxlPU1hdGguYWJzKGkueS10aGlzLnRvdWNoUG9pbnQucG9pbnQueSk7TWF0aC5hYnModCk+dGhpcy5zd2lwZURpc3RhbmNlJiZlPDIqdGhpcy5zd2lwZURpc3RhbmNlJiZEYXRlLm5vdygpLXRoaXMudG91Y2hQb2ludC50aW1lPHRoaXMuc3dpcGVUaW1lb3V0JiYodD4wP3RoaXMuYXBwLmZsaXBQcmV2KHRoaXMudG91Y2hQb2ludC5wb2ludC55PHRoaXMuYXBwLmdldFJlbmRlcigpLmdldFJlY3QoKS5oZWlnaHQvMj9cInRvcFwiOlwiYm90dG9tXCIpOnRoaXMuYXBwLmZsaXBOZXh0KHRoaXMudG91Y2hQb2ludC5wb2ludC55PHRoaXMuYXBwLmdldFJlbmRlcigpLmdldFJlY3QoKS5oZWlnaHQvMj9cInRvcFwiOlwiYm90dG9tXCIpLHM9ITApLHRoaXMudG91Y2hQb2ludD1udWxsfXRoaXMuYXBwLnVzZXJTdG9wKGkscyl9fSx0aGlzLnBhcmVudEVsZW1lbnQ9dCx0LmNsYXNzTGlzdC5hZGQoXCJzdGZfX3BhcmVudFwiKSx0Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyYmVnaW5cIiwnPGRpdiBjbGFzcz1cInN0Zl9fd3JhcHBlclwiPjwvZGl2PicpLHRoaXMud3JhcHBlcj10LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX193cmFwcGVyXCIpLHRoaXMuYXBwPWU7Y29uc3Qgcz10aGlzLmFwcC5nZXRTZXR0aW5ncygpLnVzZVBvcnRyYWl0PzE6Mjt0LnN0eWxlLm1pbldpZHRoPWkubWluV2lkdGgqcytcInB4XCIsdC5zdHlsZS5taW5IZWlnaHQ9aS5taW5IZWlnaHQrXCJweFwiLFwiZml4ZWRcIj09PWkuc2l6ZSYmKHQuc3R5bGUubWluV2lkdGg9aS53aWR0aCpzK1wicHhcIix0LnN0eWxlLm1pbkhlaWdodD1pLmhlaWdodCtcInB4XCIpLGkuYXV0b1NpemUmJih0LnN0eWxlLndpZHRoPVwiMTAwJVwiLHQuc3R5bGUubWF4V2lkdGg9MippLm1heFdpZHRoK1wicHhcIiksdC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIix3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMub25SZXNpemUsITEpLHRoaXMuc3dpcGVEaXN0YW5jZT1pLnN3aXBlRGlzdGFuY2V9ZGVzdHJveSgpe3RoaXMuYXBwLmdldFNldHRpbmdzKCkudXNlTW91c2VFdmVudHMmJnRoaXMucmVtb3ZlSGFuZGxlcnMoKSx0aGlzLmRpc3RFbGVtZW50LnJlbW92ZSgpLHRoaXMud3JhcHBlci5yZW1vdmUoKX1nZXREaXN0RWxlbWVudCgpe3JldHVybiB0aGlzLmRpc3RFbGVtZW50fWdldFdyYXBwZXIoKXtyZXR1cm4gdGhpcy53cmFwcGVyfXNldE9yaWVudGF0aW9uU3R5bGUodCl7dGhpcy53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXCItLXBvcnRyYWl0XCIsXCItLWxhbmRzY2FwZVwiKSxcInBvcnRyYWl0XCI9PT10Pyh0aGlzLmFwcC5nZXRTZXR0aW5ncygpLmF1dG9TaXplJiYodGhpcy53cmFwcGVyLnN0eWxlLnBhZGRpbmdCb3R0b209dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5oZWlnaHQvdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS53aWR0aCoxMDArXCIlXCIpLHRoaXMud3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiLS1wb3J0cmFpdFwiKSk6KHRoaXMuYXBwLmdldFNldHRpbmdzKCkuYXV0b1NpemUmJih0aGlzLndyYXBwZXIuc3R5bGUucGFkZGluZ0JvdHRvbT10aGlzLmFwcC5nZXRTZXR0aW5ncygpLmhlaWdodC8oMip0aGlzLmFwcC5nZXRTZXR0aW5ncygpLndpZHRoKSoxMDArXCIlXCIpLHRoaXMud3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiLS1sYW5kc2NhcGVcIikpLHRoaXMudXBkYXRlKCl9cmVtb3ZlSGFuZGxlcnMoKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMub25SZXNpemUpLHRoaXMuZGlzdEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZURvd24pLHRoaXMuZGlzdEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm9uVG91Y2hTdGFydCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW91c2VNb3ZlKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMub25Ub3VjaE1vdmUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Nb3VzZVVwKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kKX1zZXRIYW5kbGVycygpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5vblJlc2l6ZSwhMSksdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS51c2VNb3VzZUV2ZW50cyYmKHRoaXMuZGlzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZURvd24pLHRoaXMuZGlzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm9uVG91Y2hTdGFydCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW91c2VNb3ZlKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMub25Ub3VjaE1vdmUse3Bhc3NpdmU6IXRoaXMuYXBwLmdldFNldHRpbmdzKCkubW9iaWxlU2Nyb2xsU3VwcG9ydH0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Nb3VzZVVwKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kKSl9Z2V0TW91c2VQb3ModCxlKXtjb25zdCBpPXRoaXMuZGlzdEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3g6dC1pLmxlZnQseTplLWkudG9wfX1jaGVja1RhcmdldCh0KXtyZXR1cm4hdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5jbGlja0V2ZW50Rm9yd2FyZHx8IVtcImFcIixcImJ1dHRvblwiXS5pbmNsdWRlcyh0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSl9fWNsYXNzIGMgZXh0ZW5kcyBwe2NvbnN0cnVjdG9yKHQsZSxpLHMpe3N1cGVyKHQsZSxpKSx0aGlzLndyYXBwZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJiZWdpblwiLCc8ZGl2IGNsYXNzPVwic3RmX19ibG9ja1wiPjwvZGl2PicpLHRoaXMuZGlzdEVsZW1lbnQ9dC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9fYmxvY2tcIiksdGhpcy5pdGVtcz1zO2Zvcihjb25zdCB0IG9mIHMpdGhpcy5kaXN0RWxlbWVudC5hcHBlbmRDaGlsZCh0KTt0aGlzLnNldEhhbmRsZXJzKCl9Y2xlYXIoKXtmb3IoY29uc3QgdCBvZiB0aGlzLml0ZW1zKXRoaXMucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0KX11cGRhdGVJdGVtcyh0KXt0aGlzLnJlbW92ZUhhbmRsZXJzKCksdGhpcy5kaXN0RWxlbWVudC5pbm5lckhUTUw9XCJcIjtmb3IoY29uc3QgZSBvZiB0KXRoaXMuZGlzdEVsZW1lbnQuYXBwZW5kQ2hpbGQoZSk7dGhpcy5pdGVtcz10LHRoaXMuc2V0SGFuZGxlcnMoKX11cGRhdGUoKXt0aGlzLmFwcC5nZXRSZW5kZXIoKS51cGRhdGUoKX19Y2xhc3MgdSBleHRlbmRzIHB7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsZSxpKSx0aGlzLndyYXBwZXIuaW5uZXJIVE1MPSc8Y2FudmFzIGNsYXNzPVwic3RmX19jYW52YXNcIj48L2NhbnZhcz4nLHRoaXMuY2FudmFzPXQucXVlcnlTZWxlY3RvckFsbChcImNhbnZhc1wiKVswXSx0aGlzLmRpc3RFbGVtZW50PXRoaXMuY2FudmFzLHRoaXMucmVzaXplQ2FudmFzKCksdGhpcy5zZXRIYW5kbGVycygpfXJlc2l6ZUNhbnZhcygpe2NvbnN0IHQ9Z2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNhbnZhcyksZT1wYXJzZUludCh0LmdldFByb3BlcnR5VmFsdWUoXCJ3aWR0aFwiKSwxMCksaT1wYXJzZUludCh0LmdldFByb3BlcnR5VmFsdWUoXCJoZWlnaHRcIiksMTApO3RoaXMuY2FudmFzLndpZHRoPWUsdGhpcy5jYW52YXMuaGVpZ2h0PWl9Z2V0Q2FudmFzKCl7cmV0dXJuIHRoaXMuY2FudmFzfXVwZGF0ZSgpe3RoaXMucmVzaXplQ2FudmFzKCksdGhpcy5hcHAuZ2V0UmVuZGVyKCkudXBkYXRlKCl9fWNsYXNzIHcgZXh0ZW5kcyBse2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGUpLHRoaXMub3V0ZXJTaGFkb3c9bnVsbCx0aGlzLmlubmVyU2hhZG93PW51bGwsdGhpcy5oYXJkU2hhZG93PW51bGwsdGhpcy5oYXJkSW5uZXJTaGFkb3c9bnVsbCx0aGlzLmVsZW1lbnQ9aSx0aGlzLmNyZWF0ZVNoYWRvd3MoKX1jcmVhdGVTaGFkb3dzKCl7dGhpcy5lbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCc8ZGl2IGNsYXNzPVwic3RmX19vdXRlclNoYWRvd1wiPjwvZGl2PlxcbiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RmX19pbm5lclNoYWRvd1wiPjwvZGl2PlxcbiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RmX19oYXJkU2hhZG93XCI+PC9kaXY+XFxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGZfX2hhcmRJbm5lclNoYWRvd1wiPjwvZGl2PicpLHRoaXMub3V0ZXJTaGFkb3c9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19vdXRlclNoYWRvd1wiKSx0aGlzLmlubmVyU2hhZG93PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9faW5uZXJTaGFkb3dcIiksdGhpcy5oYXJkU2hhZG93PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9faGFyZFNoYWRvd1wiKSx0aGlzLmhhcmRJbm5lclNoYWRvdz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGZfX2hhcmRJbm5lclNoYWRvd1wiKX1jbGVhclNoYWRvdygpe3N1cGVyLmNsZWFyU2hhZG93KCksdGhpcy5vdXRlclNoYWRvdy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTogbm9uZVwiLHRoaXMuaW5uZXJTaGFkb3cuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6IG5vbmVcIix0aGlzLmhhcmRTaGFkb3cuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6IG5vbmVcIix0aGlzLmhhcmRJbm5lclNoYWRvdy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTogbm9uZVwifXJlbG9hZCgpe3RoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9fb3V0ZXJTaGFkb3dcIil8fHRoaXMuY3JlYXRlU2hhZG93cygpfWRyYXdIYXJkSW5uZXJTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpLGU9dGhpcy5zaGFkb3cucHJvZ3Jlc3M+MTAwPzIwMC10aGlzLnNoYWRvdy5wcm9ncmVzczp0aGlzLnNoYWRvdy5wcm9ncmVzcztsZXQgaT0oMTAwLWUpKigyLjUqdC5wYWdlV2lkdGgpLzEwMCsyMDtpPnQucGFnZVdpZHRoJiYoaT10LnBhZ2VXaWR0aCk7bGV0IHM9YFxcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgICAgICAgIHotaW5kZXg6ICR7KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCs1KS50b1N0cmluZygxMCl9O1xcbiAgICAgICAgICAgIHdpZHRoOiAke2l9cHg7XFxuICAgICAgICAgICAgaGVpZ2h0OiAke3QuaGVpZ2h0fXB4O1xcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCxcXG4gICAgICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAke3RoaXMuc2hhZG93Lm9wYWNpdHkqZS8xMDB9KSA1JSxcXG4gICAgICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAwKSAxMDAlKTtcXG4gICAgICAgICAgICBsZWZ0OiAke3QubGVmdCt0LndpZHRoLzJ9cHg7XFxuICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCAwO1xcbiAgICAgICAgYDtzKz0wPT09dGhpcy5nZXREaXJlY3Rpb24oKSYmdGhpcy5zaGFkb3cucHJvZ3Jlc3M+MTAwfHwxPT09dGhpcy5nZXREaXJlY3Rpb24oKSYmdGhpcy5zaGFkb3cucHJvZ3Jlc3M8PTEwMD9cInRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7XCI6XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApIHJvdGF0ZVkoMTgwZGVnKTtcIix0aGlzLmhhcmRJbm5lclNoYWRvdy5zdHlsZS5jc3NUZXh0PXN9ZHJhd0hhcmRPdXRlclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCk7bGV0IGU9KDEwMC0odGhpcy5zaGFkb3cucHJvZ3Jlc3M+MTAwPzIwMC10aGlzLnNoYWRvdy5wcm9ncmVzczp0aGlzLnNoYWRvdy5wcm9ncmVzcykpKigyLjUqdC5wYWdlV2lkdGgpLzEwMCsyMDtlPnQucGFnZVdpZHRoJiYoZT10LnBhZ2VXaWR0aCk7bGV0IGk9YFxcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgICAgICAgIHotaW5kZXg6ICR7KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCs0KS50b1N0cmluZygxMCl9O1xcbiAgICAgICAgICAgIHdpZHRoOiAke2V9cHg7XFxuICAgICAgICAgICAgaGVpZ2h0OiAke3QuaGVpZ2h0fXB4O1xcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBsZWZ0LCByZ2JhKDAsIDAsIDAsICR7dGhpcy5zaGFkb3cub3BhY2l0eX0pIDUlLCByZ2JhKDAsIDAsIDAsIDApIDEwMCUpO1xcbiAgICAgICAgICAgIGxlZnQ6ICR7dC5sZWZ0K3Qud2lkdGgvMn1weDtcXG4gICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XFxuICAgICAgICBgO2krPTA9PT10aGlzLmdldERpcmVjdGlvbigpJiZ0aGlzLnNoYWRvdy5wcm9ncmVzcz4xMDB8fDE9PT10aGlzLmdldERpcmVjdGlvbigpJiZ0aGlzLnNoYWRvdy5wcm9ncmVzczw9MTAwP1widHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKSByb3RhdGVZKDE4MGRlZyk7XCI6XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApO1wiLHRoaXMuaGFyZFNoYWRvdy5zdHlsZS5jc3NUZXh0PWl9ZHJhd0lubmVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKSxlPTMqdGhpcy5zaGFkb3cud2lkdGgvNCxpPTA9PT10aGlzLmdldERpcmVjdGlvbigpP2U6MCxzPTA9PT10aGlzLmdldERpcmVjdGlvbigpP1widG8gbGVmdFwiOlwidG8gcmlnaHRcIixuPXRoaXMuY29udmVydFRvR2xvYmFsKHRoaXMuc2hhZG93LnBvcykscj10aGlzLnNoYWRvdy5hbmdsZSszKk1hdGguUEkvMixvPVt0aGlzLnBhZ2VSZWN0LnRvcExlZnQsdGhpcy5wYWdlUmVjdC50b3BSaWdodCx0aGlzLnBhZ2VSZWN0LmJvdHRvbVJpZ2h0LHRoaXMucGFnZVJlY3QuYm90dG9tTGVmdF07bGV0IGE9XCJwb2x5Z29uKCBcIjtmb3IoY29uc3QgdCBvZiBvKXtsZXQgZT0xPT09dGhpcy5nZXREaXJlY3Rpb24oKT97eDotdC54K3RoaXMuc2hhZG93LnBvcy54LHk6dC55LXRoaXMuc2hhZG93LnBvcy55fTp7eDp0LngtdGhpcy5zaGFkb3cucG9zLngseTp0LnktdGhpcy5zaGFkb3cucG9zLnl9O2U9aC5HZXRSb3RhdGVkUG9pbnQoZSx7eDppLHk6MTAwfSxyKSxhKz1lLngrXCJweCBcIitlLnkrXCJweCwgXCJ9YT1hLnNsaWNlKDAsLTIpLGErPVwiKVwiO2NvbnN0IGc9YFxcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgICAgICAgIHotaW5kZXg6ICR7KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCsxMCkudG9TdHJpbmcoMTApfTtcXG4gICAgICAgICAgICB3aWR0aDogJHtlfXB4O1xcbiAgICAgICAgICAgIGhlaWdodDogJHsyKnQuaGVpZ2h0fXB4O1xcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgke3N9LFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsICR7dGhpcy5zaGFkb3cub3BhY2l0eX0pIDUlLFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsIDAuMDUpIDE1JSxcXG4gICAgICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAke3RoaXMuc2hhZG93Lm9wYWNpdHl9KSAzNSUsXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgMCkgMTAwJSk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogJHtpfXB4IDEwMHB4O1xcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoJHtuLngtaX1weCwgJHtuLnktMTAwfXB4LCAwKSByb3RhdGUoJHtyfXJhZCk7XFxuICAgICAgICAgICAgY2xpcC1wYXRoOiAke2F9O1xcbiAgICAgICAgICAgIC13ZWJraXQtY2xpcC1wYXRoOiAke2F9O1xcbiAgICAgICAgYDt0aGlzLmlubmVyU2hhZG93LnN0eWxlLmNzc1RleHQ9Z31kcmF3T3V0ZXJTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpLGU9dGhpcy5jb252ZXJ0VG9HbG9iYWwoe3g6dGhpcy5zaGFkb3cucG9zLngseTp0aGlzLnNoYWRvdy5wb3MueX0pLGk9dGhpcy5zaGFkb3cuYW5nbGUrMypNYXRoLlBJLzIscz0xPT09dGhpcy5nZXREaXJlY3Rpb24oKT90aGlzLnNoYWRvdy53aWR0aDowLG49MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/XCJ0byByaWdodFwiOlwidG8gbGVmdFwiLHI9W3t4OjAseTowfSx7eDp0LnBhZ2VXaWR0aCx5OjB9LHt4OnQucGFnZVdpZHRoLHk6dC5oZWlnaHR9LHt4OjAseTp0LmhlaWdodH1dO2xldCBvPVwicG9seWdvbiggXCI7Zm9yKGNvbnN0IHQgb2YgcilpZihudWxsIT09dCl7bGV0IGU9MT09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/e3g6LXQueCt0aGlzLnNoYWRvdy5wb3MueCx5OnQueS10aGlzLnNoYWRvdy5wb3MueX06e3g6dC54LXRoaXMuc2hhZG93LnBvcy54LHk6dC55LXRoaXMuc2hhZG93LnBvcy55fTtlPWguR2V0Um90YXRlZFBvaW50KGUse3g6cyx5OjEwMH0saSksbys9ZS54K1wicHggXCIrZS55K1wicHgsIFwifW89by5zbGljZSgwLC0yKSxvKz1cIilcIjtjb25zdCBhPWBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICAgICAgICB6LWluZGV4OiAkeyh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrMTApLnRvU3RyaW5nKDEwKX07XFxuICAgICAgICAgICAgd2lkdGg6ICR7dGhpcy5zaGFkb3cud2lkdGh9cHg7XFxuICAgICAgICAgICAgaGVpZ2h0OiAkezIqdC5oZWlnaHR9cHg7XFxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KCR7bn0sIHJnYmEoMCwgMCwgMCwgJHt0aGlzLnNoYWRvdy5vcGFjaXR5fSksIHJnYmEoMCwgMCwgMCwgMCkpO1xcbiAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46ICR7c31weCAxMDBweDtcXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7ZS54LXN9cHgsICR7ZS55LTEwMH1weCwgMCkgcm90YXRlKCR7aX1yYWQpO1xcbiAgICAgICAgICAgIGNsaXAtcGF0aDogJHtvfTtcXG4gICAgICAgICAgICAtd2Via2l0LWNsaXAtcGF0aDogJHtvfTtcXG4gICAgICAgIGA7dGhpcy5vdXRlclNoYWRvdy5zdHlsZS5jc3NUZXh0PWF9ZHJhd0xlZnRQYWdlKCl7XCJwb3J0cmFpdFwiIT09dGhpcy5vcmllbnRhdGlvbiYmbnVsbCE9PXRoaXMubGVmdFBhZ2UmJigxPT09dGhpcy5kaXJlY3Rpb24mJm51bGwhPT10aGlzLmZsaXBwaW5nUGFnZSYmXCJoYXJkXCI9PT10aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpPyh0aGlzLmxlZnRQYWdlLmdldEVsZW1lbnQoKS5zdHlsZS56SW5kZXg9KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCs1KS50b1N0cmluZygxMCksdGhpcy5sZWZ0UGFnZS5zZXRIYXJkRHJhd2luZ0FuZ2xlKDE4MCt0aGlzLmZsaXBwaW5nUGFnZS5nZXRIYXJkQW5nbGUoKSksdGhpcy5sZWZ0UGFnZS5kcmF3KHRoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCkpKTp0aGlzLmxlZnRQYWdlLnNpbXBsZURyYXcoMCkpfWRyYXdSaWdodFBhZ2UoKXtudWxsIT09dGhpcy5yaWdodFBhZ2UmJigwPT09dGhpcy5kaXJlY3Rpb24mJm51bGwhPT10aGlzLmZsaXBwaW5nUGFnZSYmXCJoYXJkXCI9PT10aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpPyh0aGlzLnJpZ2h0UGFnZS5nZXRFbGVtZW50KCkuc3R5bGUuekluZGV4PSh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrNSkudG9TdHJpbmcoMTApLHRoaXMucmlnaHRQYWdlLnNldEhhcmREcmF3aW5nQW5nbGUoMTgwK3RoaXMuZmxpcHBpbmdQYWdlLmdldEhhcmRBbmdsZSgpKSx0aGlzLnJpZ2h0UGFnZS5kcmF3KHRoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCkpKTp0aGlzLnJpZ2h0UGFnZS5zaW1wbGVEcmF3KDEpKX1kcmF3Qm90dG9tUGFnZSgpe2lmKG51bGw9PT10aGlzLmJvdHRvbVBhZ2UpcmV0dXJuO2NvbnN0IHQ9bnVsbCE9dGhpcy5mbGlwcGluZ1BhZ2U/dGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKTpudWxsO1wicG9ydHJhaXRcIj09PXRoaXMub3JpZW50YXRpb24mJjE9PT10aGlzLmRpcmVjdGlvbnx8KHRoaXMuYm90dG9tUGFnZS5nZXRFbGVtZW50KCkuc3R5bGUuekluZGV4PSh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrMykudG9TdHJpbmcoMTApLHRoaXMuYm90dG9tUGFnZS5kcmF3KHQpKX1kcmF3RnJhbWUoKXt0aGlzLmNsZWFyKCksdGhpcy5kcmF3TGVmdFBhZ2UoKSx0aGlzLmRyYXdSaWdodFBhZ2UoKSx0aGlzLmRyYXdCb3R0b21QYWdlKCksbnVsbCE9dGhpcy5mbGlwcGluZ1BhZ2UmJih0aGlzLmZsaXBwaW5nUGFnZS5nZXRFbGVtZW50KCkuc3R5bGUuekluZGV4PSh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrNSkudG9TdHJpbmcoMTApLHRoaXMuZmxpcHBpbmdQYWdlLmRyYXcoKSksbnVsbCE9dGhpcy5zaGFkb3cmJm51bGwhPT10aGlzLmZsaXBwaW5nUGFnZSYmKFwic29mdFwiPT09dGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKT8odGhpcy5kcmF3T3V0ZXJTaGFkb3coKSx0aGlzLmRyYXdJbm5lclNoYWRvdygpKToodGhpcy5kcmF3SGFyZE91dGVyU2hhZG93KCksdGhpcy5kcmF3SGFyZElubmVyU2hhZG93KCkpKX1jbGVhcigpe2Zvcihjb25zdCB0IG9mIHRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuZ2V0UGFnZXMoKSl0IT09dGhpcy5sZWZ0UGFnZSYmdCE9PXRoaXMucmlnaHRQYWdlJiZ0IT09dGhpcy5mbGlwcGluZ1BhZ2UmJnQhPT10aGlzLmJvdHRvbVBhZ2UmJih0LmdldEVsZW1lbnQoKS5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTogbm9uZVwiKSx0LmdldFRlbXBvcmFyeUNvcHkoKSE9PXRoaXMuZmxpcHBpbmdQYWdlJiZ0LmhpZGVUZW1wb3JhcnlDb3B5KCl9dXBkYXRlKCl7c3VwZXIudXBkYXRlKCksbnVsbCE9PXRoaXMucmlnaHRQYWdlJiZ0aGlzLnJpZ2h0UGFnZS5zZXRPcmllbnRhdGlvbigxKSxudWxsIT09dGhpcy5sZWZ0UGFnZSYmdGhpcy5sZWZ0UGFnZS5zZXRPcmllbnRhdGlvbigwKX19Y2xhc3MgeHtjb25zdHJ1Y3Rvcigpe3RoaXMuX2RlZmF1bHQ9e3N0YXJ0UGFnZTowLHNpemU6XCJmaXhlZFwiLHdpZHRoOjAsaGVpZ2h0OjAsbWluV2lkdGg6MCxtYXhXaWR0aDowLG1pbkhlaWdodDowLG1heEhlaWdodDowLGRyYXdTaGFkb3c6ITAsZmxpcHBpbmdUaW1lOjFlMyx1c2VQb3J0cmFpdDohMCxzdGFydFpJbmRleDowLGF1dG9TaXplOiEwLG1heFNoYWRvd09wYWNpdHk6MSxzaG93Q292ZXI6ITEsbW9iaWxlU2Nyb2xsU3VwcG9ydDohMCxzd2lwZURpc3RhbmNlOjMwLGNsaWNrRXZlbnRGb3J3YXJkOiEwLHVzZU1vdXNlRXZlbnRzOiEwLHNob3dQYWdlQ29ybmVyczohMCxkaXNhYmxlRmxpcEJ5Q2xpY2s6ITF9fWdldFNldHRpbmdzKHQpe2NvbnN0IGU9dGhpcy5fZGVmYXVsdDtpZihPYmplY3QuYXNzaWduKGUsdCksXCJzdHJldGNoXCIhPT1lLnNpemUmJlwiZml4ZWRcIiE9PWUuc2l6ZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2l6ZSB0eXBlLiBBdmFpbGFibGUgb25seSBcImZpeGVkXCIgYW5kIFwic3RyZXRjaFwiIHZhbHVlJyk7aWYoZS53aWR0aDw9MHx8ZS5oZWlnaHQ8PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB3aWR0aCBvciBoZWlnaHRcIik7aWYoZS5mbGlwcGluZ1RpbWU8PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBmbGlwcGluZyB0aW1lXCIpO3JldHVyblwic3RyZXRjaFwiPT09ZS5zaXplPyhlLm1pbldpZHRoPD0wJiYoZS5taW5XaWR0aD0xMDApLGUubWF4V2lkdGg8ZS5taW5XaWR0aCYmKGUubWF4V2lkdGg9MmUzKSxlLm1pbkhlaWdodDw9MCYmKGUubWluSGVpZ2h0PTEwMCksZS5tYXhIZWlnaHQ8ZS5taW5IZWlnaHQmJihlLm1heEhlaWdodD0yZTMpKTooZS5taW5XaWR0aD1lLndpZHRoLGUubWF4V2lkdGg9ZS53aWR0aCxlLm1pbkhlaWdodD1lLmhlaWdodCxlLm1heEhlaWdodD1lLmhlaWdodCksZX19IWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBpPWUuaW5zZXJ0QXQ7aWYodCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50KXt2YXIgcz1kb2N1bWVudC5oZWFkfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0sbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7bi50eXBlPVwidGV4dC9jc3NcIixcInRvcFwiPT09aSYmcy5maXJzdENoaWxkP3MuaW5zZXJ0QmVmb3JlKG4scy5maXJzdENoaWxkKTpzLmFwcGVuZENoaWxkKG4pLG4uc3R5bGVTaGVldD9uLnN0eWxlU2hlZXQuY3NzVGV4dD10Om4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCkpfX0oXCIuc3RmX19wYXJlbnQge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApO1xcblxcbiAgLW1zLXRvdWNoLWFjdGlvbjogcGFuLXk7XFxuICB0b3VjaC1hY3Rpb246IHBhbi15O1xcbn1cXG5cXG4uc2Z0X193cmFwcGVyIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG59XFxuXFxuLnN0Zl9fcGFyZW50IGNhbnZhcyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxufVxcblxcbi5zdGZfX2Jsb2NrIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIHBlcnNwZWN0aXZlOiAyMDAwcHg7XFxufVxcblxcbi5zdGZfX2l0ZW0ge1xcbiAgZGlzcGxheTogbm9uZTtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XFxufVxcblxcbi5zdGZfX291dGVyU2hhZG93IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxufVxcblxcbi5zdGZfX2lubmVyU2hhZG93IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxufVxcblxcbi5zdGZfX2hhcmRTaGFkb3cge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XFxuXFxuLnN0Zl9faGFyZElubmVyU2hhZG93IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxufVwiKTt0LlBhZ2VGbGlwPWNsYXNzIGV4dGVuZHMgY2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmV2ZW50cz1uZXcgTWFwfW9uKHQsZSl7cmV0dXJuIHRoaXMuZXZlbnRzLmhhcyh0KT90aGlzLmV2ZW50cy5nZXQodCkucHVzaChlKTp0aGlzLmV2ZW50cy5zZXQodCxbZV0pLHRoaXN9b2ZmKHQpe3RoaXMuZXZlbnRzLmRlbGV0ZSh0KX10cmlnZ2VyKHQsZSxpPW51bGwpe2lmKHRoaXMuZXZlbnRzLmhhcyh0KSlmb3IoY29uc3QgcyBvZiB0aGlzLmV2ZW50cy5nZXQodCkpcyh7ZGF0YTppLG9iamVjdDplfSl9fXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKCksdGhpcy5pc1VzZXJUb3VjaD0hMSx0aGlzLmlzVXNlck1vdmU9ITEsdGhpcy5zZXR0aW5nPW51bGwsdGhpcy5wYWdlcz1udWxsLHRoaXMuc2V0dGluZz0obmV3IHgpLmdldFNldHRpbmdzKGUpLHRoaXMuYmxvY2s9dH1kZXN0cm95KCl7dGhpcy51aS5kZXN0cm95KCksdGhpcy5ibG9jay5yZW1vdmUoKX11cGRhdGUoKXt0aGlzLnJlbmRlci51cGRhdGUoKSx0aGlzLnBhZ2VzLnNob3coKX1sb2FkRnJvbUltYWdlcyh0KXt0aGlzLnVpPW5ldyB1KHRoaXMuYmxvY2ssdGhpcyx0aGlzLnNldHRpbmcpO2NvbnN0IGU9dGhpcy51aS5nZXRDYW52YXMoKTt0aGlzLnJlbmRlcj1uZXcgZCh0aGlzLHRoaXMuc2V0dGluZyxlKSx0aGlzLmZsaXBDb250cm9sbGVyPW5ldyBnKHRoaXMucmVuZGVyLHRoaXMpLHRoaXMucGFnZXM9bmV3IG4odGhpcyx0aGlzLnJlbmRlcix0KSx0aGlzLnBhZ2VzLmxvYWQoKSx0aGlzLnJlbmRlci5zdGFydCgpLHRoaXMucGFnZXMuc2hvdyh0aGlzLnNldHRpbmcuc3RhcnRQYWdlKSxzZXRUaW1lb3V0KCgpPT57dGhpcy51aS51cGRhdGUoKSx0aGlzLnRyaWdnZXIoXCJpbml0XCIsdGhpcyx7cGFnZTp0aGlzLnNldHRpbmcuc3RhcnRQYWdlLG1vZGU6dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKX0pfSwxKX1sb2FkRnJvbUhUTUwodCl7dGhpcy51aT1uZXcgYyh0aGlzLmJsb2NrLHRoaXMsdGhpcy5zZXR0aW5nLHQpLHRoaXMucmVuZGVyPW5ldyB3KHRoaXMsdGhpcy5zZXR0aW5nLHRoaXMudWkuZ2V0RGlzdEVsZW1lbnQoKSksdGhpcy5mbGlwQ29udHJvbGxlcj1uZXcgZyh0aGlzLnJlbmRlcix0aGlzKSx0aGlzLnBhZ2VzPW5ldyBvKHRoaXMsdGhpcy5yZW5kZXIsdGhpcy51aS5nZXREaXN0RWxlbWVudCgpLHQpLHRoaXMucGFnZXMubG9hZCgpLHRoaXMucmVuZGVyLnN0YXJ0KCksdGhpcy5wYWdlcy5zaG93KHRoaXMuc2V0dGluZy5zdGFydFBhZ2UpLHNldFRpbWVvdXQoKCk9Pnt0aGlzLnVpLnVwZGF0ZSgpLHRoaXMudHJpZ2dlcihcImluaXRcIix0aGlzLHtwYWdlOnRoaXMuc2V0dGluZy5zdGFydFBhZ2UsbW9kZTp0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfSl9LDEpfXVwZGF0ZUZyb21JbWFnZXModCl7Y29uc3QgZT10aGlzLnBhZ2VzLmdldEN1cnJlbnRQYWdlSW5kZXgoKTt0aGlzLnBhZ2VzLmRlc3Ryb3koKSx0aGlzLnBhZ2VzPW5ldyBuKHRoaXMsdGhpcy5yZW5kZXIsdCksdGhpcy5wYWdlcy5sb2FkKCksdGhpcy5wYWdlcy5zaG93KGUpLHRoaXMudHJpZ2dlcihcInVwZGF0ZVwiLHRoaXMse3BhZ2U6ZSxtb2RlOnRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCl9KX11cGRhdGVGcm9tSHRtbCh0KXtjb25zdCBlPXRoaXMucGFnZXMuZ2V0Q3VycmVudFBhZ2VJbmRleCgpO3RoaXMucGFnZXMuZGVzdHJveSgpLHRoaXMucGFnZXM9bmV3IG8odGhpcyx0aGlzLnJlbmRlcix0aGlzLnVpLmdldERpc3RFbGVtZW50KCksdCksdGhpcy5wYWdlcy5sb2FkKCksdGhpcy51aS51cGRhdGVJdGVtcyh0KSx0aGlzLnJlbmRlci5yZWxvYWQoKSx0aGlzLnBhZ2VzLnNob3coZSksdGhpcy50cmlnZ2VyKFwidXBkYXRlXCIsdGhpcyx7cGFnZTplLG1vZGU6dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKX0pfWNsZWFyKCl7dGhpcy5wYWdlcy5kZXN0cm95KCksdGhpcy51aS5jbGVhcigpfXR1cm5Ub1ByZXZQYWdlKCl7dGhpcy5wYWdlcy5zaG93UHJldigpfXR1cm5Ub05leHRQYWdlKCl7dGhpcy5wYWdlcy5zaG93TmV4dCgpfXR1cm5Ub1BhZ2UodCl7dGhpcy5wYWdlcy5zaG93KHQpfWZsaXBOZXh0KHQ9XCJ0b3BcIil7dGhpcy5mbGlwQ29udHJvbGxlci5mbGlwTmV4dCh0KX1mbGlwUHJldih0PVwidG9wXCIpe3RoaXMuZmxpcENvbnRyb2xsZXIuZmxpcFByZXYodCl9ZmxpcCh0LGU9XCJ0b3BcIil7dGhpcy5mbGlwQ29udHJvbGxlci5mbGlwVG9QYWdlKHQsZSl9dXBkYXRlU3RhdGUodCl7dGhpcy50cmlnZ2VyKFwiY2hhbmdlU3RhdGVcIix0aGlzLHQpfXVwZGF0ZVBhZ2VJbmRleCh0KXt0aGlzLnRyaWdnZXIoXCJmbGlwXCIsdGhpcyx0KX11cGRhdGVPcmllbnRhdGlvbih0KXt0aGlzLnVpLnNldE9yaWVudGF0aW9uU3R5bGUodCksdGhpcy51cGRhdGUoKSx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VPcmllbnRhdGlvblwiLHRoaXMsdCl9Z2V0UGFnZUNvdW50KCl7cmV0dXJuIHRoaXMucGFnZXMuZ2V0UGFnZUNvdW50KCl9Z2V0Q3VycmVudFBhZ2VJbmRleCgpe3JldHVybiB0aGlzLnBhZ2VzLmdldEN1cnJlbnRQYWdlSW5kZXgoKX1nZXRQYWdlKHQpe3JldHVybiB0aGlzLnBhZ2VzLmdldFBhZ2UodCl9Z2V0UmVuZGVyKCl7cmV0dXJuIHRoaXMucmVuZGVyfWdldEZsaXBDb250cm9sbGVyKCl7cmV0dXJuIHRoaXMuZmxpcENvbnRyb2xsZXJ9Z2V0T3JpZW50YXRpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKX1nZXRCb3VuZHNSZWN0KCl7cmV0dXJuIHRoaXMucmVuZGVyLmdldFJlY3QoKX1nZXRTZXR0aW5ncygpe3JldHVybiB0aGlzLnNldHRpbmd9Z2V0VUkoKXtyZXR1cm4gdGhpcy51aX1nZXRTdGF0ZSgpe3JldHVybiB0aGlzLmZsaXBDb250cm9sbGVyLmdldFN0YXRlKCl9Z2V0UGFnZUNvbGxlY3Rpb24oKXtyZXR1cm4gdGhpcy5wYWdlc31zdGFydFVzZXJUb3VjaCh0KXt0aGlzLm1vdXNlUG9zaXRpb249dCx0aGlzLmlzVXNlclRvdWNoPSEwLHRoaXMuaXNVc2VyTW92ZT0hMX11c2VyTW92ZSh0LGUpe3RoaXMuaXNVc2VyVG91Y2h8fGV8fCF0aGlzLnNldHRpbmcuc2hvd1BhZ2VDb3JuZXJzP3RoaXMuaXNVc2VyVG91Y2gmJmguR2V0RGlzdGFuY2VCZXR3ZWVuVHdvUG9pbnQodGhpcy5tb3VzZVBvc2l0aW9uLHQpPjUmJih0aGlzLmlzVXNlck1vdmU9ITAsdGhpcy5mbGlwQ29udHJvbGxlci5mb2xkKHQpKTp0aGlzLmZsaXBDb250cm9sbGVyLnNob3dDb3JuZXIodCl9dXNlclN0b3AodCxlPSExKXt0aGlzLmlzVXNlclRvdWNoJiYodGhpcy5pc1VzZXJUb3VjaD0hMSxlfHwodGhpcy5pc1VzZXJNb3ZlP3RoaXMuZmxpcENvbnRyb2xsZXIuc3RvcE1vdmUoKTp0aGlzLmZsaXBDb250cm9sbGVyLmZsaXAodCkpKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/page-flip/dist/js/page-flip.browser.js\n");

/***/ })

};
;